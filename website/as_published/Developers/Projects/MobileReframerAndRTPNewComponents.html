<html>
<head>
<title> Developers/Projects/MobileReframerAndRTPNewComponents </title>
<meta name="description" content="Kamaelia - making concurrency simpler in python - Developers/Projects/MobileReframerAndRTPNewComponents">
<meta name="keywords" content="python concurrency generators threads processes component system experts beginners media networking">
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
<span class="largertext">&nbsp;</span>
<!--   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span>  -->
<!--  </b> -->
</b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twoC column">
                    &nbsp;
                </div>
                <div class="eightC column">
                











































































































<h2>Project Task Page: Mobile Reframer and RTP New Components<br></h2>
<p><div style="float: right; border: solid;" class="twoC"><b> Status:</b> Completed<br><b>Current Developers: </b><i>MPS</i><br><b>Current "inflight" dev location:</b> /branches/private_MH_20070429_newcomponents<br><b>Start Date:</b> 29 April 2007<br><b>End Date:</b> <i>5 Aug 2007</i><br><b>Date this page last updated:</b> <i>5 Aug 2007</i><br><b>Estimated effort so far:</b> 14<br></div><b><br></b></p><h2><b>Description</b></h2><p>Merging of <i>new</i> components developed for RTP and Mobile Reframer work (in /trunk/Sketches/MH ) into the main Kamaelia codebase thereby increasing Kamaelia's capabilities and facilitating the incorporation of the Mobile Reframe and RTP work as official examples or tools.</p><p>Note that this <i>does not</i> include components that were developed as modifications or rewrites of existing components that are not essential to the operation of the mobile reframer - such as the Multicast and Selector modifications. It does include the 'new' UnixProcess component and modifications to the Carousel.<br></p><h2>Inputs</h2><ul><li>Task Sponsor: MH,MPS</li><li>Task Owner: MPS</li><li>Developers: MH,MPS</li><li>Users: n/a<br></li><li>Interested third parties: MPS</li><li>Requirements</li><ul><li>MUST add new components to main codebase in trunk<br></li><li>SHOULD not cause regressions<br></li></ul></ul><h2>Outputs</h2><h3>Expected</h3><ul><li>New sourcefiles in<br></li><ul><li>/Code/Python/Kamaelia/Kamaelia</li><li>/Code/Python/Kamaelia/Tools<br></li></ul></ul><h3>Actual</h3>


<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Generator" content="Kate, the KDE Advanced Text Editor">

<ul><li>Branch /branches/private_MH_20070429_newcomponents/</li><li>...containing new components:</li><ul><li>/Code/Python/Kamaelia/Kamaelia/File/MaxSpeedFileReader.py</li><li>/Code/Python/Kamaelia/Kamaelia/File/UnixProcess2.py</li><li>/Code/Python/Kamaelia/Kamaelia/Experimental/Chassis.py</li><li>/Code/Python/Kamaelia/Kamaelia/Chassis/Seq.py</li><li>/Code/Python/Kamaelia/Kamaelia/Chassis/Carousel.py</li><li>/Code/Python/Kamaelia/Kamaelia/Device/DVB/SoftDemux.py</li><li>/Code/Python/Kamaelia/Kamaelia/XML/__init__.py</li><li>/Code/Python/Kamaelia/Kamaelia/XML/SimpleXMLParser.py</li><li>/Code/Python/Kamaelia/Kamaelia/Protocol/RTP/__init__.py</li><li>/Code/Python/Kamaelia/Kamaelia/Protocol/RTP/RTP.py</li><li>/Code/Python/Kamaelia/Kamaelia/Protocol/RecoverOrder.py</li><li>/Code/Python/Kamaelia/Kamaelia/Protocol/SDP.py</li><li>/Code/Python/Kamaelia/Kamaelia/Video/CropAndScale.py</li><li>/Code/Python/Kamaelia/Kamaelia/Video/DetectShotChanges.py</li><li>/Code/Python/Kamaelia/Kamaelia/Video/PixFormatConversion.py</li><li>/Code/Python/Kamaelia/Kamaelia/Video/__init__.py</li><li>/Code/Python/Kamaelia/Kamaelia/Codec/WAV.py</li><li>/Code/Python/Kamaelia/Kamaelia/Codec/YUV4MPEG.py</li><li>/Code/Python/Kamaelia/Kamaelia/UI/Pygame/VideoSurface.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/PromptedTurnstile.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/RateChunker.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/OneShot.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/TwoWaySplitter.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/Max.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/FirstOnly.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/RangeFilter.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/TagWithSequenceNumber.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/Sync.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/Collate.py</li><li>.
  </li></ul><li>Removed (moved elsewhere)<br></li><ul><li>/Code/Python/Bindings/MpegTsDemux/* <i>(moved into "SupportCode")</i><br></li><li>.<br></li></ul><li>New bindings/pyrex based optimised library</li><ul><li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/_PixFormatConvertCore.c</li><li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/__init__.py</li><li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/Kamaelia.Support.Optimised.Video.PixFormatConvert.pyx</li><li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/Kamaelia.Support.Optimised.Video.ComputeMeanAbsDiff.pyx</li><li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/__init__.py</li><li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Kamaelia.Support.Optimised.MpegTsDemux.pyx</li><li>
  .<br>
</li></ul><li>New tests</li><ul><li>/Tests/Python/Kamaelia/Chassis/test_Carousel.py</li><li>.</li></ul><li>New tool: Video player:<br></li><ul><li>/Code/Python/Kamaelia/Tools/VideoPlayer.py</li><li>.<br></li></ul><li>New tool: Video Reframer:<br></li><ul><li>/Code/Python/Kamaelia/Tools/VideoReframer/VideoReframer.py</li><li>/Code/Python/Kamaelia/Tools/VideoReframer/MobileReframe.xsd</li><li>/Code/Python/Kamaelia/Tools/VideoReframer/EDL.py</li><li>/Code/Python/Kamaelia/Tools/VideoReframer/StopSelector.py</li><li>.<br></li></ul><li>New tool: Video shot change detector:<br></li><ul><li>/Code/Python/Kamaelia/Tools/VideoShotChangeDetector/DetectShotChanges.xsd</li><li>/Code/Python/Kamaelia/Tools/VideoShotChangeDetector/ShotChangeDetector.py</li><li>/Code/Python/Kamaelia/Tools/VideoShotChangeDetector/StopSelector.py</li><li>.</li></ul><li>New examples: RTP:</li><ul><li>/Code/Python/Kamaelia/Examples/UDP_Systems/RTP_G711_microphone_sender.py</li><li>/Code/Python/Kamaelia/Examples/UDP_Systems/RTP_G711_receiver.py</li><li>.<br></li></ul><li>Modified</li><ul><li>/Code/Python/Kamaelia/CHANGELOG</li><li>/Code/Python/Kamaelia/Kamaelia/Device/DVB/SoftDemux.py <i>(adjusted imports to match moved support pyrex lib)</i><br></li><li>/Code/Python/Kamaelia/Kamaelia/Chassis/Carousel.py <i>(Carousel rewrite to fix shutdown behaviour bugs)</i></li><li>/Code/Python/Bindings/SupportCode/setup.py</li><li>.<br></li></ul></ul>
<h3>Realistic possibilities arising as a result of activity on this task</h3><ul><li>Merging of mobile reframer itself<br></li></ul><h2>Related Tasks</h2><h3>Tasks that directly enable this task (dependencies)</h3><ul><li><a href='/Developers/Projects/MobileReframer'> Development of Mobile Reframer </a></li><li><a href='/Developers/Projects/MulticastRtpMpegRemultiplexer'> Development of RTP Remuxing </a></li></ul><h3>Sub Tasks</h3><ul><li>Branch containing modifications</li><li>Merge of branch</li></ul><h2>Task Log</h2><ul><li>2007 04 29 : <b>Task status changed</b> to running<br></li><li>2007 04 29 : Added developer MH</li><li>2007 05 17 : Branch ready for merge. Time spent: 13 days</li><li>2007 05 22 : MH : Some last minute additions (merge not commenced yet)</li><li>2007 08 01 : MPS Eventually merged (sorry for delay)<br></li></ul><h2>Discussion</h2>I originally opted to separate the merging of these completely new components from the merging of ones that modify/rewrite existing components. These components independently add new functionality that should not have any knockon impact on existing Kamaelia components and systems. Modifications/rewrites may do.<br><br>I eventually decided it made sense to bundle everything to get mobile reframer (renamed Video Reframer) working, including the reframer itself into one branch. In practice most components are new. There is only one rewrite - the Carousel - which I've tested and added a long overdue test suite for that illustrates how it improves on the existing Carousel design. Finally, I've added the reframer itself and supplementary video player tool.<br><br>It made sense to <b>rename the Mobile Reframer to Video Reframer</b> since the first name implies an unnecessary limitation on the range of applications it could be used for. In reality it could be used to process any re-editing and reframing of video for any purpose.<br><br>This is taking longer than originally anticipated becuase various small bugs and fixes have been identified along the way - both due to the reframer and also asides from helping Google SoC students. In addition it took longer to rationalise these components; tidy up and fix documentation; and figure out how to neatly fit them into the main codebase.<br><br>The <b>SupportCode</b> pyrex based library was introduced (and the <b>SoftDemux</b> one deprecated) because several of the components introduced for the video reframer, video player and cut detector require various optimised alogirthms (image difference comparisons, YUV-&gt;RGB conversion, etc). It feels sensible to bundle these together as generic support code as they have no dependencies on external libraries. I also chose to get them to appear under the Kamaelia.Support.Optimised namespace - as opposed to allowing them to litter the top level. SoftDemux naturally fitted into the category and so was rolled in too. Perhaps this should have been done as a separate branch. If so, it is relatively easy to separate out from this set of changes.<br><p>-- Matt, 16 May 2007<br></p>























                </div>
                <div class="twoC column last">
                    &nbsp;
                </div>
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home.html">Kamaelia</a>
    is an open source project originated from and guided by <a href="http://www.bbc.co.uk/rd"> BBC 
    Research</a>. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



