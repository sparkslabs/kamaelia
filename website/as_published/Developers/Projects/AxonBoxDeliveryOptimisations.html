<html>
<head>
<title> Developers/Projects/AxonBoxDeliveryOptimisations </title>
<meta name="description" content="Kamaelia - making concurrency simpler in python - Developers/Projects/AxonBoxDeliveryOptimisations">
<meta name="keywords" content="python concurrency generators threads processes component system experts beginners media networking">
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
<span class="largertext">&nbsp;</span>
<!--   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span>  -->
<!--  </b> -->
</b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twoC column">
                    &nbsp;
                </div>
                <div class="eightC column">
                


<h2>Project Task Page: Axon Box Delivery Optimisations<br></h2>

<div style="float: right; border: solid;" class="twoC"><b> Status:</b> Completed <br><b>Current Developers: </b> <i>MH</i><br><b>Current "inflight" dev location:</b> <i>/branches/</i>private_MH_axon_optimisations<br><b>Start Date:</b> <i>March 2006</i><br><b>Expected End Date:</b> n/a<br><b>End Date:</b> <i>April 2006</i><br><b>Date this page last updated:</b> <i>22 February 2007</i><br><b>Estimated effort so far:</b> <i>20 days</i><br></div><br><br><h2><b>Description</b></h2>Modifying axon to optimise delivery of messages along linkages - especially chains of linkages - by delivering a message immediately and directly to the final destination inbox as soon as it is sent to an outbox. This would remove the need for a separate "postman" microprocess to transfer the message along each linkage, from outbox to inbox.<br><br>This will substantially improve responsiveness and performance of Axon systems - there will be less microprocesses in a running system; and where components are nested delivery take a single hop rather than as many hops as there are linkages in the chain. <br><br>Needed to make practical high data throughput Kamaelia systems, such as <a href='/Developers/Projects/KamaeliaMacro'> KamaeliaMacro</a>.<br><h2>Inputs</h2><ul><li>Task Sponsor: Michael (MS)<br></li><li>Task Owner: Michael, Matt (MH)<br></li><li>Developers: Michael (initial experiments &amp; final merge), Matt (final code)<br></li><li>Users: Michael, Matt<br></li><li>Interested third parties: none<br></li><li>Requirements</li><ul><li>MUST improve rate of message delivery along linkages</li><li>MUST deliver messages in a single hop along a chain (2 or more joined) linkages</li><li>SHOULD not cause substantive perormance decreases elsewhere in the system</li><li>SHOULD pass the existing Axon test suite<br></li></ul></ul>Relevant Influencing factors:<br>
<ul><li><i>Needed for Kamaelia Macro</i></li><li><i>Preferable to temporarily drop Axon's ability to 'wake up' producer components when message delivery occurs if this is necessary to implement these performance improvements</i></li></ul><br><h2>Outputs</h2><h3>Expected</h3><ul><li>Modifications to Axon (initially in branch, then merged into mainline code)</li><li>Modifications and additions to Axon test suite</li><li>Improved performance<br></li></ul><h3>Actual</h3><ul><li>Code:</li><ul><li>CVS branch: private_MH_axon_optimisations</li><li>Mainline code: /Code/Python/Axon/Axon/</li><ul><li>Modified: most/all source files<br></li><li>Added: Box.py</li><li>Removed: Postman.py</li></ul><li>Mainline code: /Code/Python/Axon/Axon/Tests</li><ul><li>Tests removed that were now inapplicable</li><li>New tests added</li></ul><li>Updated components in mainline: <br></li><ul><li>/Code/Python/Kamaelia/Kamaelia/Chassis/Carousel.py</li><li>/Code/Python/Kamaelia/Kamaelia/Internet/Selector.py</li><li>/Code/Python/Kamaelia/Kamaelia/Util/Splitter.py</li><li>/Sketches/MH/ircShakespeare.py</li></ul></ul></ul><h3>Realistic possibilities arising as a result of activity on this task</h3>Axon's support for the following was removed; and needed to be added back in again:<br><ul><li>limited "pipewidths" - linkages that could only carry a limited number of items data before becoming 'full' - (a rate limiting mechanism)<br></li><li>waking a component when a message leaves on of its outboxes (free space to send to)</li></ul><h2>Task Log</h2><ul><li>February 2006 : Added developer Michael</li><li>March 2006 : <b>Task status changed</b> to running.</li><li>March 2006 : Michael : worked on inital sketches<br></li><li>March 2006 : Added developer Matt</li><li>March 2006 : Matt : worked on private_MH_axon_optimisations branch for Axon</li><li>12 April 2006 : Matt : completed development</li><li>18 April 2006 : Michael : Allocated to merge branch into mainline</li><li>27 April 2006 : Michael : Merge completed</li><li>27 April 2006 : <b>Task status changed</b> to completed<br></li><li>28 April 2006 : Removed developers, Michael, Matt</li><li>28 April 2006 : Minor updates to components to match API change<br></li><li>21 February 2007 : Matt : Project Task Page created<br></li></ul><h2>Discussion</h2>These optimisations led to a massive performance improvement; but at the price of Axon losing some functionality (namely the ability to wake components when message deliveries take place).<br><br>The modifications and additions to the axon testsuite were not initially merged when the main code was merged from the branch to the mainline codebase. This was because the decision was taken to move the tests from <font face="Courier New, monospace">/Code/Python/Axon/Axon/test</font> to /Tests/Python/Axon/. They were later merged when other optimisations were merged later in Summer 2006.<br><br>A minor Axon API change was made (other that the removal of support for waking due to deliveries) to make things more uniform for component writers - a new unlink() method superceeds deRegisterLinkage() - this mirrors the existing link() method.<br><br>-- Matt Hammond, 22 February 2007<br><p>
</p>
                </div>
                <div class="twoC column last">
                    &nbsp;
                </div>
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home.html">Kamaelia</a>
    is an open source project originated from and guided by <a href="http://www.bbc.co.uk/rd"> BBC 
    Research</a>. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



