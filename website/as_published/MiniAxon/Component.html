<html>
<head>
<title> MiniAxon/Component </title>
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span> 
  </b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twelveC column"> 
                








<meta name="qrichtext" content="1">
<p><span style="font-size: 14pt; font-weight: 600;">4<a name="Component"></a> Simple Component - Microprocesses with standard external interfaces</span></p>
<p dir="ltr"><span style="font-weight: 600;">Exercise: </span> Write a class called <span style="font-family: Courier; font-weight: 600;">component</span> that subclasses <span style="font-family: Courier;">microprocess</span> with the following...</p>
<p>Attributes:</p>
<ul type="disc"><li><span style="font-family: Courier;">self.boxes</span> - this should be a dictionary of the following form:</li>
<ul type="disc"><div><span style="font-family: Courier;">{ "inbox": [],"outbox": [] }</span></div></ul>
<div>Clearly this allows for more inboxes and outboxes, but at this stage we'll keep things simple.</div></ul>
<p>Behaviour: (methods)</p>
<ul type="disc"><li>As before an <span style="font-family: Courier;">__init__</span> for anything you need (eg attributes above :)<br></li>
<li><span style="font-family: Courier;">send(self, value, boxname)</span> </li>
<ul type="disc"><li dir="ltr">This method takes the value and appends it to the end of the list associated with the boxname.</li>
<li dir="ltr">That is if I do:</li>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;">self.send(value, boxname)</span></div></ul>
<div dir="ltr"></div>
<div dir="ltr">Then given the suggested implementation of boxes above the following should be true afterwards:</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;">self.boxes[boxname][-1] == value</span></div></ul>
<div dir="ltr"></div>
<div dir="ltr">ie the last value in the list associated with the boxname is the value we sent to that outbox. More explicitly, if the value of self.boxes was this beforehand:</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>self.boxes == { "inbox" : [],<br>                "outbox" : ["hello", "world"] }</pre></span></div></ul>
<div dir="ltr"></div>
<div dir="ltr">And the following call had been made:</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier; font-weight: 600;"><pre></span><span style="font-family: Courier;">self.send("gameover",</span><span style="font-family: Courier;">"outbox"</span><span style="font-family: Courier;">)</pre></span></div></ul>
<div dir="ltr"></div>
<div dir="ltr">The self.boxes would look like this afterwards:</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>self.boxes == { "inbox" : [],<br>                "outbox" : ["hello", "world", "gameover"] }</pre></span></div></ul></ul>
<div></div>
<li><span style="font-family: Courier;">recv(self, boxname)</span></li>
<ul type="disc"><li dir="ltr">This is the logical opposite of sending. Rather than appending a value at the end of the send queue, we take the first value in the queue.</li>
<li dir="ltr">Behaviourally, given a starting value of self.boxes:</li>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>self.boxes == { "inbox" : ["hello", "world", "gameover"],<br>                "outbox" : [] }</pre></span></div></ul>
<div dir="ltr">Then I would expect the following behaviour code....</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>print "GRABBING DATA", self.recv("inbox")<br>print "GRABBING DATA", self.recv("inbox")<br>print "GRABBING DATA", self.recv("inbox")<br>print "GRABBING DATA", self.recv("inbox")</pre></span></div>
<div dir="ltr"></div></ul>
<div dir="ltr">... to display the following sort of behaviour:</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>GRABBING DATA hello<br>GRABBING DATA world<br>GRABBING DATA gameover<br>GRABBING DATA<br>Traceback (most recent call last):<br>  File "<stdin>", line 1, in ?<br>  File "<stdin>", line 7, in main<br>  File "<stdin>", line 8, in recv<br>IndexError: list index out of range</pre></stdin></stdin></stdin></span></div></ul>
<div dir="ltr"></div>
<div dir="ltr">The value of self.boxes should also change as follows after each call:</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>self.boxes == { "inbox" : ["hello", "world", "gameover"], # At start<br>                "outbox" : [] }<br>self.recv("inbox")<br>self.boxes == { "inbox" : ["world", "gameover"],<br>                "outbox" : [] }<br>self.recv("inbox")<br>self.boxes == { "inbox" : [ "gameover"],<br>                "outbox" : [] }<br>self.recv("inbox")<br>self.boxes == { "inbox" : [],<br>                "outbox" : [] }<br>self.recv("inbox")<br> *** BANG*** (For the moment, we don't care what exception gets thrown)</pre></span></div></ul></ul>
<div dir="ltr"></div>
<li><span style="font-family: Courier;">dataReady(self, boxname)</span></li>
<ul type="disc"><li>This should return the length of the list associated with the boxname.  <br><br>For example,  given:</li>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>self.boxes == { "inbox" : ["hello", "world", "gameover"],<br>                "control" : ["world", "gameover"],<br>                "feedback" : [],<br>                "outbox" : [] }</pre></span></div></ul>
<div></div>
<div>The following behaviour is expected:</div>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier; font-weight: 600;">print</span><span style="font-family: Courier;"> self.dataReady("inbox")</span><br>    -&gt; displays 3<br><br><span style="font-family: Courier; font-weight: 600;">print</span><span style="font-family: Courier;"> self.dataReady("control")</span><br>    -&gt; displays 2<br><br><span style="font-family: Courier; font-weight: 600;">print</span><span style="font-family: Courier;"> self.dataReady("feedback")</span><br>    -&gt; displays 0<br><br><span style="font-family: Courier; font-weight: 600;">print</span><span style="font-family: Courier;"> self.dataReady("somerandomname")</span><br>    -&gt; causes a <span style="font-family: Courier;">KeyError: somerandomname</span> exception to be thrown</div></ul></ul></ul>
<p dir="ltr"></p>
<p dir="ltr"><table width='100%'><td bgcolor='#FFFFAA' align='center'><b><a href='/MiniAxon/Component.html'>Answer Hidden</a></b></td><td bgcolor='#AAAAAA' align='center'><b><a href='/MiniAxon/Component.html?cat=2'>Show Answer</a></b></td></table><p><span style="font-weight:600">Answer:</span></p>
<ul type="disc"><li>Select from the above tabs to show the answer!</li></ul>
<p></p>
</p>
<p dir="ltr"><span style="font-weight: 600;">Discussion:</span></p>
<p dir="ltr">Ok that's a fairly long description, but a fairly simple implementation. So what's this done? It's enabled us to send data to a running generator and receive data back. We're not worried what the generator is doing at any point in time, and so the communications between us and the generator (or between generators) is asynchronous.</p>
<p dir="ltr">An extension to the suggested __init__ is to do the following:</p>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>class component(microprocess):<br>    Boxes = {<br>        "inbox" : "This is where we expect to receive messages",<br>        "outbox" : "This is where we send results/messages"<br>    }<br>    def __init__(self):<br>        super(simplecomponent, self).__init__()<br>        self.boxes = {}<br>        for box in self.Boxes:<br>            self.boxes[box] = list()</pre></span></div></ul>
<p dir="ltr"></p>
<p dir="ltr">This small extension means that classes subclassing <span style="font-family: Courier;">component</span> can have a different set of inboxes and outboxes. For example:</p>
<ul type="disc"><div dir="ltr"><span style="font-family: Courier;"><pre>class spinnyThing(component):<br>    Boxes = {<br>        "inbox" : "As per default",<br>        "outbox" : "As per defaults",<br>        "rotation" : "Expect an integer between 0 and 359 (degrees)",<br>    }</pre></span></div></ul>
<p dir="ltr"></p>
<p dir="ltr">That said, components by themselves are relatively boring. Unless we have some way of moving the data between generators we haven't gained anything (really) beyond the printer example above. So we need someone/something that can move data/messages from outboxes and deliver to inboxes...</p>


                </div> 
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home>5D">Kamaelia</a>
    is an open source project originated from and guided by BBC
    Research. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved.
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



