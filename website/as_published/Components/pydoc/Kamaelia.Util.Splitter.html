<html>
<head>
<title> Components/pydoc/Kamaelia.Util.Splitter </title>
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span> 
  </b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twelveC column"> 
                <html>
<head>
<title>Kamaelia docs : Kamaelia.Util.Splitter</title>
<style type="test/css">
pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }
</style>
</head>
<body>
<div class="container">
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.html">Util</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.html">Splitter</a></h1>
</div>
<div class="section">
<div class="container">
<ul class="simple">
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.Plug.html">Plug</a></strong></li>
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.PlugSplitter.html">PlugSplitter</a></strong></li>
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.Splitter.html">Splitter</a></strong></li>
</ul>
</div>
<ul class="simple">
<li><a class="reference" href="#191">Simple Fanout of messages</a><ul>
<li><a class="reference" href="#192">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#193">How does it work?</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference" href="#194">Pluggable Fanout of messages</a><ul>
<li><a class="reference" href="#195">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#196">How does it work?</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference" href="#197">Plug for PlugSplitter</a><ul>
<li><a class="reference" href="#198">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#199">How does it work?</a><ul>
</ul>
</li>
<li><a class="reference" href="#200">Thoughts</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section">
<div class="section">
<h2 id="191"><a id="simple-fanout-of-messages" name="simple-fanout-of-messages">Simple Fanout of messages</a></h2>
<p>A component that splits a data source, fanning it out to multiple destinations.</p>
<div class="section">
<h3 id="192"><a id="example-usage" name="example-usage">Example Usage</a></h3>
<p>Component connecting to a Splitter:</p>
<pre class="literal-block">
class Consumer(<a class="reference" href="/Docs/Axon/Axon.Component.component.html">Axon.Component.component</a>):
    Outboxes = [ &quot;outbox&quot;, &quot;signal&quot;, &quot;splitter_config&quot; ]

    def main(self):
         self.send( addsink( self, &quot;inbox&quot;, &quot;control&quot; ), &quot;splitter_config&quot;)
         yield 1
         ... do stuff when data is received on &quot;inbox&quot; inbox

mysplitter = Splitter()
Pipeline( producer(), mysplitter ).activate()

myconsumer = Consumer().activate()
myconsumer.link( (myconsumer, &quot;splitter_config&quot;), (&quot;mysplitter&quot;, &quot;configuration&quot;) )
</pre>
</div>
<div class="section">
<h3 id="193"><a id="how-does-it-work" name="how-does-it-work">How does it work?</a></h3>
<p>Any data sent to the component's &quot;inbox&quot; inbox is sent out to multiple
destinations (but not to the &quot;outbox&quot; outbox).</p>
<p>Add a destination by sending an addsink(...) message to the &quot;configuration&quot;
inbox of the component. Splitter will then wire up to the 'sinkbox' inbox
specified in the message, and send it any data sent to its &quot;inbox&quot; inbox.</p>
<p>NOTE: Splitter only does this for the 'sinkbox' inbox, not for the
'sinkcontrol' inbox. If one is specified, it is ignored.</p>
<p>There is no limit on the number of 'sinks' that can be connected to the
splitter. The same component can add itself as a sink multiple times, provided
different named inboxes are used each time.</p>
<p>NOTE: The data is not duplicated - the same item is sent to all destinations.
Care must therefore be taken if the data item is mutable.</p>
<p>If one or more destinations cause a noSpaceInBox exception, the data item will
be queued, and Splitter will attempt to resend it to the destinations in
question until successful. It will stop forwarding any new incoming data until
it has succeeded, thereby ensuring the order of data is not altered.</p>
<p>Stop data being sent to a destination by sending a removesink(...) message to
the &quot;configuration&quot; inbox of the Splitter component. Splitter will then cease
sending messages to the 'sinkbox' inbox specified in the message and will
unwire from it.</p>
<p>Any messages sent to the &quot;control&quot; inbox are ignored. The &quot;outbox&quot; and &quot;signal&quot;
outboxes are not used.</p>
<p>This component does not terminate.</p>
</div>
</div>
<div class="section">
<h2 id="194"><a id="pluggable-fanout-of-messages" name="pluggable-fanout-of-messages">Pluggable Fanout of messages</a></h2>
<p>The PlugSplitter component splits a data source, fanning it out to multiple
destinations. The Plug component allows you to easily 'plug' a destination
into the splitter.</p>
<div class="section">
<h3 id="195"><a id="id1" name="id1">Example Usage</a></h3>
<p>Two consumers receiving the same data from a single consumer. Producer and
consumers are encapsulated by PlugSplitter and Plug components respectively:</p>
<pre class="literal-block">
mysplitter = PlugSplitter( producer() ).activate()

Plug(mysplitter, consumer() ).activate()
Plug(mysplitter, consumer() ).activate()
</pre>
<p>The same, but the producer and consumers are not encapsulated:</p>
<pre class="literal-block">
mysplitter = PlugSplitter()
Pipeline( producer, mysplitter ).activate()

Pipeline( Plug(mysplitter), consumer() ).activate()
Pipeline( Plug(mysplitter), consumer() ).activate()
</pre>
</div>
<div class="section">
<h3 id="196"><a id="id2" name="id2">How does it work?</a></h3>
<p>Any data sent to the component's &quot;inbox&quot; and &quot;control&quot; inboxes is sent out to
multiple destinations. It is also sent onto the components &quot;outbox&quot; and
&quot;signal&quot; outboxes, respectively.</p>
<p>Alternatively, initialisation you can specify a 'source' component. If you do,
then data to be sent out to multiple destinations is instead received from that
component's &quot;outbox&quot; and &quot;signal&quot; outboxes, respectively. Any data sent to the
&quot;inbox&quot; and &quot;control&quot; inboxes of the PlugSplitter component will be forwarded
to the &quot;inbox&quot; and &quot;control&quot; inboxes of the 'source' component, respectively.</p>
<p>This source component is encapsulated as a child within the PlugSplitter
component, and so must not be separately activated. Activating PlugSplitter
will also activate this child component.</p>
<p>Add a destination by making a Plug component, specifying the PlugSplitter
component to 'plug into'. See documentation for the Plug component for more
information.</p>
<p>Alternatively, you can add and remove destinations manually:</p>
<ul>
<li><p class="first">Add a destination by sending an addsink(...) message to the &quot;configuration&quot;
inbox of the component.</p>
<p>If a 'sinkbox' inbox is specified in the message, then
PlugSplitter will wire up to it and forward to it any 'inbox'/'outbox' data.
If a 'sinkcontrol' inbox is specified, then Plugsplitter will wire up to it
and forward to it any 'control'/'signal' data.</p>
</li>
<li><p class="first">Stop data being sent to a destination by sending a removesink(...) message to
the &quot;configuration&quot; inbox of the Splitter component.</p>
<p>Splitter will then cease
sending messages to the 'sinkbox' inbox specified in the message and will
unwire from it.</p>
</li>
</ul>
<p>There is no limit on the number of 'sinks' that can be connected to the
splitter. The same component can add itself as a sink multiple times, provided
different named inboxes are used each time.</p>
<p>NOTE: The data is not duplicated - the same item is sent to all destinations.
Care must therefore be taken if the data item is mutable.</p>
<p>If a shutdownMicroprocess or producerFinished message is received on the
&quot;control&quot; inbox and there is NO 'source' child component, then the message is
forwarded onto all 'control' destinations and the 'signal' outbox. The
component then immediately terminates, unwiring from all destinations.</p>
<p>If there is a child component then PlugSplitter will terminate when the child
component terminates, unwiring from all destinations.</p>
</div>
</div>
<div class="section">
<h2 id="197"><a id="plug-for-plugsplitter" name="plug-for-plugsplitter">Plug for PlugSplitter</a></h2>
<p>The Plug component 'plugs into' a PlugSplitter as a destination to which the
source data is split.</p>
<div class="section">
<h3 id="198"><a id="id3" name="id3">Example Usage</a></h3>
<p>See PlugSplitter documentation.</p>
</div>
<div class="section">
<h3 id="199"><a id="id4" name="id4">How does it work?</a></h3>
<p>Initialise the Plug component by specifying a PlugSplitter component to connect
to and the component that wants to receive the data from the Plugsplitter.</p>
<p>The destination/sink component is encapsulated as a child component, and is
therefore activated by the Plug component when it is activated. Do not activate
it yourself.</p>
<p>The Plug component connects to the PlugSplitter component by wiring its
&quot;splitter_config&quot; outbox to the &quot;configuration&quot; inbox of the PlugSplitter
component and sending it an addsink(...) message. This causes PlugSplitter
to wire up to the Plug's &quot;inbox&quot; and &quot;control&quot; inboxes.</p>
<p>The Plug's &quot;inbox&quot; and &quot;control&quot; inboxes are forwarded to the &quot;inbox&quot; and
&quot;control&quot; inboxes of the child component respectively. The &quot;outbox&quot; and
&quot;signal&quot; outboxes of the child component are forwarded to the &quot;outbox&quot; and
&quot;signal&quot; outboxes of the Plug component respectively.</p>
<p>When the child component terminates, the Plug component sends a removesink(...)
message to the PlugSplitter, causing PlugSplitter to unwire from it. It then
terminates.</p>
</div>
<div class="section">
<h3 id="200"><a id="thoughts" name="thoughts">Thoughts</a></h3>
<p>PlugSplitter is probably more reliable than Splitter however it <em>feels</em> too
complex. However the actual &quot;Splitter&quot; class in this file is not the
preferable option.</p>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.html">Util</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.html">Splitter</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.Plug.html">Plug</a></h1>
<div class="section">
<h2 id="symbol-Plug">class Plug(<a class="reference" href="/Docs/Axon/Axon.Component.component.html">Axon.Component.component</a>)</h2>
<p>Plug(splitter,component) -&gt; new Plug component.</p>
<p>A component that 'plugs' the specified component into the specified
splitter as a destination for data.</p>
<p>Keyword arguments:</p>
<ul class="simple">
<li>splitter   -- splitter component to plug into (any component that accepts addsink(...) and removesink(...) messages on a 'configuration' inbox</li>
<li>component  -- component to receive data from the splitter</li>
</ul>
<div class="section">
<h3><a id="symbol-Plug.Inboxes" name="symbol-Plug.Inboxes">Inboxes</a></h3>
<ul class="simple">
<li><strong>control</strong> : Incoming control data for child component, and shutdown signalling</li>
<li><strong>inbox</strong> : Incoming data for child component</li>
</ul>
</div>
<div class="section">
<h3><a id="symbol-Plug.Outboxes" name="symbol-Plug.Outboxes">Outboxes</a></h3>
<ul class="simple">
<li><strong>outbox</strong> : Outgoing data from child component</li>
<li><strong>signal</strong> : Outgoing control data from child component, and shutdown signalling</li>
<li><strong>splitter_config</strong> : Used to communicate with the target splitter</li>
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-Plug.__init__" name="symbol-Plug.__init__">__init__(self, splitter, component)</a></h4>
<p>x.__init__(...) initializes x; see x.__class__.__doc__ for signature</p>
</div>
<div class="section">
<h4><a id="symbol-Plug.childrenDone" name="symbol-Plug.childrenDone">childrenDone(self)</a></h4>
<p>Unplugs any children that have terminated, and returns true if there are no
running child components left (ie. their microproceses have finished)</p>
</div>
<div class="section">
<h4><a id="symbol-Plug.main" name="symbol-Plug.main">main(self)</a></h4>
<p>Main loop.</p>
</div>
</div>
<div class="section">
</div>
</div>
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.html">Util</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.html">Splitter</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.PlugSplitter.html">PlugSplitter</a></h1>
<div class="section">
<h2 id="symbol-PlugSplitter">class PlugSplitter(<a class="reference" href="/Docs/Axon/Axon.AdaptiveCommsComponent.AdaptiveCommsComponent.html">Axon.AdaptiveCommsComponent.AdaptiveCommsComponent</a>)</h2>
<p>PlugSplitter([sourceComponent]) -&gt; new PlugSplitter component.</p>
<p>Splits incoming data out to multiple destinations. Send addsink(...) and
removesink(...) messages to the 'configuration' inbox to add and remove
destinations.</p>
<p>Keyword arguments:</p>
<ul class="simple">
<li>sourceComponent  -- None, or component to act as data source</li>
</ul>
<div class="section">
<h3><a id="symbol-PlugSplitter.Inboxes" name="symbol-PlugSplitter.Inboxes">Inboxes</a></h3>
<ul class="simple">
<li><strong>control</strong> : Shutdown signalling, and signalling to be fanned out.</li>
<li><strong>_control</strong> : Internal inbox for receiving from the child source component (if it exists)</li>
<li><strong>configuration</strong> : addsink(...) and removesink(...) request messages</li>
<li><strong>inbox</strong> : Data items to be fanned out.</li>
<li><strong>_inbox</strong> : Internal inbox for receiving from the child source component (if it exists)</li>
</ul>
</div>
<div class="section">
<h3><a id="symbol-PlugSplitter.Outboxes" name="symbol-PlugSplitter.Outboxes">Outboxes</a></h3>
<ul class="simple">
<li><strong>outbox</strong> : Data items received on 'inbox' inbox.</li>
<li><strong>signal</strong> : Shutdown signalling, and data items received on 'control' inbox.</li>
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-PlugSplitter.__init__" name="symbol-PlugSplitter.__init__">__init__(self[, sourceComponent])</a></h4>
<p>x.__init__(...) initializes x; see x.__class__.__doc__ for signature</p>
</div>
<div class="section">
<h4><a id="symbol-PlugSplitter._addSink" name="symbol-PlugSplitter._addSink">_addSink(self, sink[, sinkinbox][, sinkcontrol])</a></h4>
<p>Add a new destination for data.</p>
<p>Specify target component (sink), and target inbox (sinkinbox) and/or
target shutdown signalling inbox (sinkcontrol).</p>
</div>
<div class="section">
<h4><a id="symbol-PlugSplitter._delSink" name="symbol-PlugSplitter._delSink">_delSink(self, sink[, sinkinbox][, sinkcontrol])</a></h4>
<p>Remove a destination for data.</p>
<p>Specify target component (sink), and target inbox (sinkinbox) and/or
target shutdown signalling inbox (sinkcontrol).</p>
</div>
<div class="section">
<h4><a id="symbol-PlugSplitter.childrenDone" name="symbol-PlugSplitter.childrenDone">childrenDone(self)</a></h4>
<p>Unplugs any children that have terminated, and returns true if there are no
running child components left (ie. their microproceses have finished)</p>
</div>
<div class="section">
<h4><a id="symbol-PlugSplitter.main" name="symbol-PlugSplitter.main">main(self)</a></h4>
<p>Main loop.</p>
</div>
</div>
<div class="section">
</div>
</div>
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.html">Util</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.html">Splitter</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Util.Splitter.Splitter.html">Splitter</a></h1>
<div class="section">
<h2 id="symbol-Splitter">class Splitter(<a class="reference" href="/Docs/Axon/Axon.AdaptiveCommsComponent.AdaptiveCommsComponent.html">Axon.AdaptiveCommsComponent.AdaptiveCommsComponent</a>)</h2>
<p>Splitter() -&gt; new Splitter component.</p>
<p>Splits incoming data out to multiple destinations. Send addsink(...) and
removesink(...) messages to the 'configuration' inbox to add and remove
destinations.</p>
<div class="section">
<h3><a id="symbol-Splitter.Inboxes" name="symbol-Splitter.Inboxes">Inboxes</a></h3>
<ul class="simple">
<li><strong>control</strong> : NOT USED</li>
<li><strong>configuration</strong> : addsink(...) and removesink(...) request messages</li>
<li><strong>inbox</strong> : Source of data items</li>
</ul>
</div>
<div class="section">
<h3><a id="symbol-Splitter.Outboxes" name="symbol-Splitter.Outboxes">Outboxes</a></h3>
<ul class="simple">
<li><strong>outbox</strong> : NOT USED</li>
<li><strong>signal</strong> : NOT USED</li>
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-Splitter.__init__" name="symbol-Splitter.__init__">__init__(self)</a></h4>
<p>x.__init__(...) initializes x; see x.__class__.__doc__ for signature</p>
</div>
<div class="section">
<h4><a id="symbol-Splitter.createsink" name="symbol-Splitter.createsink">createsink(self, sink[, sinkbox][, passthrough])</a></h4>
<p>Set up a new destination for data.</p>
<p>Creates an outbox, links it to the target (component,inbox) and records
it in self.outlist.</p>
</div>
<div class="section">
<h4><a id="symbol-Splitter.deletesink" name="symbol-Splitter.deletesink">deletesink(self, oldsink)</a></h4>
<p>Removes the specified (component, inbox) as a destination for data
where (component, inbox) = (oldsink.sink, oldsink.sinkbox).</p>
<p>Unlinks the target, destroys the corresponding outbox, and removes the
corresponding record from self.outlist.</p>
</div>
<div class="section">
<h4><a id="symbol-Splitter.mainBody" name="symbol-Splitter.mainBody">mainBody(self)</a></h4>
<p>Main loop body.</p>
</div>
</div>
<div class="section">
</div>
</div>
</div>
</div>





<div class="section">
<h1>Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer?
Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback
<a class="reference" href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701">here</a>
in reply to the documentation thread in the Kamaelia blog.</p>
</div>


<p><i>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</i>
</body></html>

                </div> 
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home>5D">Kamaelia</a>
    is an open source project originated from and guided by BBC
    Research. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved.
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



