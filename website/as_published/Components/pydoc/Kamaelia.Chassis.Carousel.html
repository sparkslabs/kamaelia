<html>
<head>
<title> Components/pydoc/Kamaelia.Chassis.Carousel </title>
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span> 
  </b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twelveC column"> 
                <html>
<head>
<title>Kamaelia docs : Kamaelia.Chassis.Carousel</title>
<style type="test/css">
pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }
</style>
</head>
<body>
<div class="container">
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Chassis.html">Chassis</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Chassis.Carousel.html">Carousel</a></h1>
</div>
<div class="section">
<div class="container">
<ul class="simple">
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Chassis.Carousel.Carousel.html">Carousel</a></strong></li>
</ul>
</div>
<ul class="simple">
<li><a class="reference" href="#278">Component Carousel Chassis</a><ul>
<li><a class="reference" href="#279">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#280">Why is this useful?</a><ul>
</ul>
</li>
<li><a class="reference" href="#281">How does it work?</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference" href="#282">Test documentation</a><ul>
</ul>
</li>
</ul>
</div>
<div class="section">
<h1 id="278">Component Carousel Chassis</h1>
<p>This component lets you create and wire up another component. You can then
swap it for a new one by sending it a message. The message contents is used by
a factory function to create the new replacement component.</p>
<p>The component that is created is a child contained within Carousel. Wire up to
Carousel's &quot;inbox&quot; inbox and &quot;outbox&quot; outbox to send and receive messages from
the child.</p>
<div class="section">
<h2 id="279"><a id="example-usage" name="example-usage">Example Usage</a></h2>
<p>A reusable file reader:</p>
<pre class="literal-block">
def makeFileReader(filename):
    return ReadFileAdapter(filename = filename, ...other args... )

reusableFileReader = Carousel(componentFactory = makeFileReader)
</pre>
<p>Whenever you send a filename to the &quot;next&quot; inbox of the reusableFileReader
component, it will read that file. You can do this as many times as you wish.
The data read from the file comes out of the carousel's outbox.</p>
<p>Putting this re-usable file reader to use: the following simple example lets
the user enter the names of files to read:</p>
<pre class="literal-block">
Graphline(
   FILENAME_INPUT = ConsoleReader(prompt=&quot;enter a filename&gt;&quot;),
   FILE_READER = Carousel(componentFactory = makeFileReader),
   OUTPUT = ConsoleEchoer(),
   linkages = {
       (&quot;FILENAME_INPUT&quot;, &quot;outbox&quot;) : (&quot;FILE_READER&quot;, &quot;next&quot;),
       (&quot;FILE_READER&quot;, &quot;outbox&quot;) : (&quot;OUTPUT&quot;, &quot;inbox&quot;),
   }).run()
</pre>
<p>The user input causes the Carousel to replace the current file reader component
(if it has not already terminated) with a new one. The output from this file
reader is sent straight back to the console.</p>
</div>
<div class="section">
<h2 id="280"><a id="why-is-this-useful" name="why-is-this-useful">Why is this useful?</a></h2>
<p>This chassis component is for making a carousel of components. It gets its name
from a broadcast carousel - where a programme (or set of programmes) is
broadcast one after another, often on a loop. Alternatively, think of public
information screens which display a looping carousel of slides of information.</p>
<p>You gain reusability from things that are not directly reusable and normally
come to a halt. For example, make a carousel of file reader components, and you
can read from more than one file, one after another. The carousel will make a
new file reader component every time you make new request.</p>
<p>The Carousel automatically sends a &quot;NEXT&quot; message when a component finishes, to
prompt you make a new request.</p>
</div>
<div class="section">
<h2 id="281"><a id="how-does-it-work" name="how-does-it-work">How does it work?</a></h2>
<p>The carousel chassis creates and encapsulates (as a child) the component you
want it to, and lets it get on with it.</p>
<p>Anything sent to the carousel's &quot;inbox&quot; inbox is passed onto the child
component. Anything the child sends out appears at the carousel's &quot;outbox&quot;
outbox.</p>
<p>If the child terminates, then the carousel unwires it and sends a &quot;NEXT&quot;
message out of its &quot;requestNext&quot; outbox (unless of course it has been told to
shutdown).</p>
<p>Another component, such as a Chooser, can respond to this message by sending
the new set of arguments (for the factory function) to the carousel's &quot;next&quot;
inbox. The carousel then uses your factory function to create a new child
component. This way, a sequence of operations can be automatically chained
together.</p>
<p>If the argument source needs to receive a &quot;NEXT&quot; message before sending its
first set of arguments, then set the argument make1stRequest=True when creating
the carousel.</p>
<p>You can actually send new orders to the &quot;next&quot; inbox at any time, not just in
response to requests from the Carousel. The carousel will immediately ask that
child to terminate; then as soon as it has done so, it will create the new one
and wire it in in its place.</p>
<p>If Carousel receives an <a class="reference" href="/Docs/Axon/Axon.Ipc.producerFinished.html">Axon.Ipc.producerFinished</a> message on its &quot;control&quot; inbox
then it will finish handling any pending messages on its &quot;next&quot; inbox (in the
way described above) then when there are none left, it will ask the child
component to shut down by sending on the producerFinished message to the child.
As soon as the child has terminated, the Carousel will terminate and send on the
producerFinished message out of its own &quot;signal&quot; outbox.</p>
<p>If Carousel receives an <a class="reference" href="/Docs/Axon/Axon.Ipc.shutdownMicroprocess.html">Axon.Ipc.shutdownMicroprocess</a> message on its &quot;control&quot;
inbox then it will immediately send it on to its child component to ask it
to terminate. As soon as the child has termianted, the Carousel will terminate
and send on the shutdownMicroprocess message out of its own &quot;signal&quot; outbox.</p>
<p>Of course, if the Carousel has no child at the time either shutdown request is
received, it will immediately terminate and send on the message out of its
&quot;signal&quot; outbox.</p>
</div>
<h1 id="282">Test documentation</h1>
<p>Tests passed:</p>
<ul class="simple">
<li>A shutdownMicroprocess or producerFinished message sent to the &quot;control&quot; inbox of the Carousel gets passed onto the &quot;control&quot; inbox of the child.</li>
<li>Carousel initialises. By default it does nothing.</li>
<li>If the make1stRequest argument is set to True at initialisation, Carousel sends a &quot;NEXT&quot; message out of its &quot;requestNext&quot; outbox after it has started up.</li>
<li>Carousel doesn't terminate (in response to producerFinished or shutdownMicroprocess) until the child has terminated.</li>
<li>If the child sends out a producerFinished or shutdownMicroprocess message out of its &quot;signal&quot; outbox; the Carousel does not send out a message from its &quot;requestNext&quot; outbox in response.</li>
<li>Messages coming out of the child's &quot;signal&quot; outbox are ignored. They do not emerge from the &quot;signal&quot; outbox of the Carousel.</li>
<li>When a child terminates; the Carousel sends a &quot;NEXT&quot; message out of its &quot;requestNext&quot; outbox.</li>
<li>Any mesasges sent out of the &quot;outbox&quot; outbox of a child emerges from the &quot;outbox&quot; outbox of the Carousel.</li>
<li>Any messages sent to the &quot;inbox&quot; inbox of the Carousel gets sent on tot the &quot;inbox&quot; inbox of the child component.</li>
<li>When a message is sent to the &quot;next&quot; inbox, the supplied factory function is run with that argument.</li>
<li>Messages sent to the &quot;next&quot; inbox trigger the factory function, leading to the creation and activation of a child component.</li>
<li>A message sent to the &quot;next&quot; inbox starts a new child; but only once the current child has terminated.</li>
<li>If a shutdownMicroprocess() is received, any messages queued on the 'next' inbox are discarded; and Carousel shuts down as soon as any current child has terminated.</li>
<li>If a producerFinished() is received, but there are still messages queued on the 'next' inbox, those messages are processed (and children created) first. *Then* the Carousel terminates.</li>
<li>When idle, with no child; a shutdownMicroprocess or producerFinished message will cause Carousel to terminate.</li>
<li>If a producerFinshed or shutdownMicroprocess is sent to a Carousel's &quot;control&quot; inbox, it is passed onto the child's &quot;control&quot; inbox.</li>
</ul>
</div>
<hr class="docutils" />
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Chassis.html">Chassis</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Chassis.Carousel.html">Carousel</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Chassis.Carousel.Carousel.html">Carousel</a></h1>
<div class="section">
<h2 id="symbol-Carousel">class Carousel(<a class="reference" href="/Docs/Axon/Axon.Component.component.html">Axon.Component.component</a>)</h2>
<p>Carousel(componentFactory,[make1stRequest]) -&gt; new Carousel component</p>
<p>Create a Carousel component that makes child components one at a time
(in carousel fashion) using the supplied factory function.</p>
<p>Keyword arguments:</p>
<ul class="simple">
<li>componentFactory  -- function that takes a single argument and returns a component</li>
<li>make1stRequest    -- if True, Carousel will send an initial &quot;NEXT&quot; request. (default=False)</li>
</ul>
<div class="section">
<h3><a id="symbol-Carousel.Inboxes" name="symbol-Carousel.Inboxes">Inboxes</a></h3>
<ul class="simple">
<li><strong>control</strong> : </li>
<li><strong>inbox</strong> : child's inbox</li>
<li><strong>next</strong> : requests to replace child</li>
</ul>
</div>
<div class="section">
<h3><a id="symbol-Carousel.Outboxes" name="symbol-Carousel.Outboxes">Outboxes</a></h3>
<ul class="simple">
<li><strong>outbox</strong> : child's outbox</li>
<li><strong>signal</strong> : </li>
<li><strong>_signal</strong> : internal use: for sending 'shutdownMicroprocess' to child</li>
<li><strong>requestNext</strong> : for requesting new child component</li>
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-Carousel.__init__" name="symbol-Carousel.__init__">__init__(self, componentFactory[, make1stRequest])</a></h4>
<p>x.__init__(...) initializes x; see x.__class__.__doc__ for signature</p>
</div>
<div class="section">
<h4><a id="symbol-Carousel.checkControl" name="symbol-Carousel.checkControl">checkControl(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-Carousel.handleChildTerminations" name="symbol-Carousel.handleChildTerminations">handleChildTerminations(self)</a></h4>
<p>Unplugs any children that have terminated</p>
</div>
<div class="section">
<h4><a id="symbol-Carousel.instantiateNewChild" name="symbol-Carousel.instantiateNewChild">instantiateNewChild(self, args)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-Carousel.main" name="symbol-Carousel.main">main(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-Carousel.requestNext" name="symbol-Carousel.requestNext">requestNext(self)</a></h4>
<p>Sends 'next' out the 'requestNext' outbox</p>
</div>
<div class="section">
<h4><a id="symbol-Carousel.shutdownChild" name="symbol-Carousel.shutdownChild">shutdownChild(self, shutdownMsg)</a></h4>
</div>
</div>
<div class="section">
</div>
</div>
</div>
</div>





<div class="section">
<h1>Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer?
Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback
<a class="reference" href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701">here</a>
in reply to the documentation thread in the Kamaelia blog.</p>
</div>


<p><i>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</i>
</body></html>

                </div> 
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home>5D">Kamaelia</a>
    is an open source project originated from and guided by BBC
    Research. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved.
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



