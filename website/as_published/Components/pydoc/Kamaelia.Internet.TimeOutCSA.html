<html>
<head>
<title> Components/pydoc/Kamaelia.Internet.TimeOutCSA </title>
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span> 
  </b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twelveC column"> 
                <html>
<head>
<title>Kamaelia docs : Kamaelia.Internet.TimeOutCSA</title>
<style type="test/css">
pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }
</style>
</head>
<body>
<div class="container">
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Internet.html">Internet</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Internet.TimeOutCSA.html">TimeOutCSA</a></h1>
</div>
<div class="section">
<div class="container">
<ul class="simple">
</ul>
</div>
<ul class="simple">
<li><a class="reference" href="#125">ResettableSender</a><ul>
<li><a class="reference" href="#126">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#127">More detail</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference" href="#128">ActivityMonitor</a><ul>
<li><a class="reference" href="#129">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#130">Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#131">More detail</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section">
<p>This module provides a set of components and convienience functions for making a
CSA time out.  To use it, simply call the function InactivityChassis with a timeout
period and the CSA to wrap.  This will send a producerFinished signal to the CSA
if it does not send a message on its outbox or CreatorFeedback boxes before the
timeout expires.</p>
<div class="section">
<h2 id="125"><a id="resettablesender" name="resettablesender">ResettableSender</a></h2>
<p>This component is a simple way of makinga timeout event occur. If it receives nothing
after 5 seconds, a &quot;NEXT&quot; message is sent.</p>
<div class="section">
<h3 id="126"><a id="example-usage" name="example-usage">Example Usage</a></h3>
<p>A tcp client that connects to a given host and port and prints and expects to receive
<em>something</em> at more frequent than 5 seconds intervals. If it does not, it prints a
rude message the first time this happens:</p>
<pre class="literal-block">
Pipeline(
    TCPClient(HOST, PORT),
    ResettableSender(),
    PureTransformer(lambda x : &quot;Oi, wake up. I have received nothing for 5 seconds!&quot;),
    ConsoleEchoer(),
    ).run()
</pre>
</div>
<div class="section">
<h3 id="127"><a id="more-detail" name="more-detail">More detail</a></h3>
<p>By default, ResettableSender is set up to send a timeout message &quot;NEXT&quot; out of its &quot;outbox&quot;
outbox within 5 seconds. However, if it receives any message on its &quot;inbox&quot; inbox then the
timer is reset.</p>
<p>Once the timeout has occurred this component terminates. It will therefore only ever generate
one &quot;NEXT&quot; message, even if multiple timeouts occur.</p>
<p>Termination is silent - no messages to indicate shutdown are sent out of the &quot;signal&quot; outbox.
This component ignores any input on its &quot;control&quot; inbox - including shutdown messages.</p>
</div>
</div>
<div class="section">
<h2 id="128"><a id="activitymonitor" name="activitymonitor">ActivityMonitor</a></h2>
<p>ActivityMonitor monitors up to four streams of messages passing through it and, in response,
sends messages out of its &quot;observed&quot; outbox to indicate that there has been activity.</p>
<p>This is intended to wrap a component such that it may be monitored by another component.</p>
<div class="section">
<h3 id="129"><a id="id1" name="id1">Example Usage</a></h3>
<p>Type a line at the console, and your activity will be 'observed' - a 'RESET' message will
appear as well as the line you have typed:</p>
<pre class="literal-block">
Graphline(
   MONITOR = ActivityMonitor(),
   OUTPUT  = ConsoleEchoer(),
   INPUT   = ConsoleReader(),
   linkages = {
       (&quot;INPUT&quot;,   &quot;outbox&quot;) : (&quot;MONITOR&quot;, &quot;inbox&quot;),
       (&quot;MONITOR&quot;, &quot;outbox&quot;) : (&quot;OUTPUT&quot;, &quot;inbox&quot;),

       (&quot;MONITOR&quot;, &quot;observed&quot;) : (&quot;OUTPUT&quot;, &quot;inbox&quot;),
   }
).run()
</pre>
</div>
<div class="section">
<h3 id="130"><a id="usage" name="usage">Usage</a></h3>
<p>To use it, connect any of the three inboxes to outboxes on the component to be monitored.</p>
<p>The messages that are sent to those inboxes will be forwarded to their respective outbox.
For example, suppose &quot;HELLO&quot; was received on 'inbox2'.  self.message (&quot;RESET&quot; by default)
will be sent on the 'observed' outbox and &quot;HELLO&quot; will be sent out on 'outbox2'.</p>
<p>ActivityMonitor will shut down upon receiving a producerFinished or shutdownCSA message on
its control inbox.</p>
<p>Please note that this can't wrap adaptive components properly as of yet.</p>
</div>
<div class="section">
<h3 id="131"><a id="id2" name="id2">More detail</a></h3>
<p>Any message sent to the &quot;inbox&quot;, &quot;inbox2&quot;, &quot;inbox3&quot; or &quot;control&quot; inboxes are immediately
forwarded on out of the &quot;outbox&quot;, &quot;outbox2&quot;, &quot;outbox3&quot; or &quot;signal&quot; outboxes respectively.</p>
<p>Whenever this happens, a &quot;RESET&quot; message (the default) is sent out of the &quot;observed&quot; outbox.</p>
<p>For every batch of messages waiting at the three inboxes that get forwarded on out of their
respective outboxes, <em>only one</em> &quot;RESET&quot; message will be sent. This should therefore only
be used as a general indication of activity, not as a means of counting every individual
message passing through this component.</p>
<p>Any message sent to the &quot;control&quot; inbox is also checked to see if it is a shutdownCSA
or producerFinished message. If it is one of these then it will still be forwarded on out
of the &quot;signal&quot; outbox, but will also cause ActivityMonitor to immediately terminate.</p>
<p>Any messages waiting at any of the inboxes (including the &quot;control&quot; inbox) at the time the
shutdown triggering message is received will be sent on before termination.</p>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section">
</div>
</div>





<div class="section">
<h1>Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer?
Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback
<a class="reference" href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701">here</a>
in reply to the documentation thread in the Kamaelia blog.</p>
</div>


<p><i>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</i>
</body></html>

                </div> 
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home>5D">Kamaelia</a>
    is an open source project originated from and guided by BBC
    Research. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved.
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



