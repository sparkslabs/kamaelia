<html>
<head>
<title> Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables </title>
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span> 
  </b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twelveC column"> 
                <html>
<head>
<title>Kamaelia docs : Kamaelia.Device.DVB.Parse.ReassemblePSITables</title>
<style type="test/css">
pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }
</style>
</head>
<body>
<div class="container">
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.html">Device</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.html">DVB</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.html">Parse</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables.html">ReassemblePSITables</a></h1>
</div>
<div class="section">
<div class="container">
<ul class="simple">
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables.ReassemblePSITables.html">ReassemblePSITables</a></strong></li>
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables.ReassemblePSITablesService.html">ReassemblePSITablesService</a></strong></li>
</ul>
</div>
<ul class="simple">
<li><a class="reference" href="#518">Reassembly of DVB PSI Tables</a><ul>
<li><a class="reference" href="#519">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#520">ReassemblePSITables</a><ul>
<li><a class="reference" href="#521">Behaviour</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference" href="#522">ReassemblePSITablesService</a><ul>
<li><a class="reference" href="#523">Behaviour</a><ul>
</ul>
</li>
<li><a class="reference" href="#524">How does it work?</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section">
<h1 id="518">Reassembly of DVB PSI Tables</h1>
<p>Components that take a stream of MPEG Transport stream packets containing
Programme Status Information (PSI) tables and reassembles the table sections,
ready for parsing of the data within them.</p>
<p>ReassemblePSITables can do this for a stream of packets containing a single
table.</p>
<p>ReassemblePSITablesService provides a full service capable of reassembling
multiple tables from a multiplexed stream of packets, and distributing them to
subscribers.</p>
<div class="section">
<h2 id="519"><a id="example-usage" name="example-usage">Example Usage</a></h2>
<p>A simple pipeline to receive, parse and display the Event Information Table in a
multiplex:</p>
<pre class="literal-block">
FREQUENCY = 505.833330
feparams = {
    &quot;inversion&quot; : dvb3.frontend.INVERSION_AUTO,
    &quot;constellation&quot; : dvb3.frontend.QAM_16,
    &quot;code_rate_HP&quot; : dvb3.frontend.FEC_3_4,
    &quot;code_rate_LP&quot; : dvb3.frontend.FEC_3_4,
}

EIT_PID = 0x12

Pipeline( OneShot( msg=[&quot;ADD&quot;, [0x2000] ] ),    # take all packets of all PIDs
          Tuner(FREQUENCY, feparams),
          DVB_SoftDemuxer( { EIT_PID : [&quot;outbox&quot;] } ),
          ReassemblePSITables(),
          ParseEventInformationTable(),
          PrettifyEventInformationTable(),
          ConsoleEchoer(),
        ).run()
</pre>
<p>Set up a dvb tuner and demultiplexer as a service; then set up a PSI tables
service (that subscribes to the demuxer); then finally subscribe to the PSI
tables service to get Event Information Tables and parse and display them:</p>
<pre class="literal-block">
RegisterService( Receiver( FREQUENCY, FE_PARAMS, 0 ),
                {&quot;DEMUXER&quot;:&quot;inbox&quot;},
            ).activate()

RegisterService(         Graphline( PSI     = ReassemblePSITablesService(),
               DEMUXER = ToService(&quot;DEMUXER&quot;),
               linkages = {
                   (&quot;PSI&quot;, &quot;pid_request&quot;) : (&quot;DEMUXER&quot;, &quot;inbox&quot;),
                   (&quot;&quot;,    &quot;request&quot;)     : (&quot;PSI&quot;,     &quot;request&quot;),
               }
             ),
    {&quot;PSI_Tables&quot;:&quot;request&quot;}
).activate()

Pipeline( Subscribe(&quot;PSI&quot;, [EIT_PID]),
          ParseEventInformationTable(),
          PrettifyEventInformationTable(),
          ConsoleEchoer(),
        ).run()
</pre>
<p>In the above example, the final pipeline subscribes to the 'PSI' service,
requesting the PSI tables in MPEG Transport Stream packets with packet id 0x12.</p>
<p>The ReassemblePSITablesService service uses a ToService component to send its
own requests to the 'DEMUXER' service to ask for MPEG Transport Stream packets
with the packet ids it needs.</p>
</div>
<div class="section">
<h2 id="520"><a id="reassemblepsitables" name="reassemblepsitables">ReassemblePSITables</a></h2>
<p>ReassemblePSITables reassembles one PSI table at a time from a stream of
MPEG transport stream packets containing that table.</p>
<div class="section">
<h3 id="521"><a id="behaviour" name="behaviour">Behaviour</a></h3>
<p>Send individual MPEG Transport Stream packets to the &quot;inbox&quot; inbox containing
fragments of a particular PSI table.</p>
<p>ReassemblePSITables will reconstruct the table sections. As soon as a section is
complete, it will be sent, as a raw binary string, out of the &quot;outbox&quot; outbox.
The process repeats indefinitely.</p>
<p>If a shutdownMicroprocess or producerFinished message is received on the
&quot;control&quot; inbox, then it will immediately be sent on out of the &quot;signal&quot; outbox
and the component will then immediately terminate.</p>
</div>
</div>
<div class="section">
<h2 id="522"><a id="reassemblepsitablesservice" name="reassemblepsitablesservice">ReassemblePSITablesService</a></h2>
<p>ReassemblePSITablesService provides a full service capable of reassembling
multiple tables from a multiplexed stream of packets, and distributing them to
subscribers.</p>
<div class="section">
<h3 id="523"><a id="id1" name="id1">Behaviour</a></h3>
<p>ReassemblePSITablesServices takes individual MPEG Transport Stream packets sent
to its &quot;inbox&quot; inbox and reconstructs table sections, distributing them to
clients/subscribers that have requested them.</p>
<p>To be a client you can wrap ReassemblePSITablesService into a named service
by using a Kamaelia.Experiment.Services.RegisterService component, and then
subscribe to it using a Kamaelia.Experiment.Services.SubscribeTo component.</p>
<p>Alternatively, send a 'ADD' or 'REMOVE' message to its &quot;request&quot; inbox,
requesting to be sent (or no longer be sent) tables from packets of particular
PIDs, and specifying the inbox to which you want the packets to be sent. The
format of these requests is:</p>
<pre class="literal-block">
(&quot;ADD&quot;,    [pid, pid, ...], (dest_component, dest_inboxname))
(&quot;REMOVE&quot;, [pid, pid, ...], (dest_component, dest_inboxname))
</pre>
<p>ReassemblePSITablesService will automatically do the wiring or unwiring needed
to ensure the packets you have requested get sent to the inbox you specified.</p>
<p>Send an 'ADD' request, and you will immediately start receiving tables in
those PIDs. Send a 'REMOVE' request and you will shortly no longer receive
tables in the PIDs you specify. Note that you may still receive some tables
after your 'REMOVE' request.</p>
<p>ReassemblePSITablesService will also send its own requests (in the same format)
out of its &quot;pid_request&quot; outbox. You can wire this up to the source of transport
stream packets, so that ReassemblePSITablesService can tell that source what
PIDs it needs. Alternatively, simply ensure that your source is already sending
all the PIDs your ReassemblePSITablesService component will need.</p>
<p>If a shutdownMicroprocess or producerFinished message is received on the
&quot;control&quot; inbox, then it will immediately be sent on out of the &quot;signal&quot; outbox
and the component will then immediately terminate.</p>
</div>
<div class="section">
<h3 id="524"><a id="how-does-it-work" name="how-does-it-work">How does it work?</a></h3>
<p>ReassemblePSITablesService creates an outbox for each subscriber destination,
and wires from it to the destination.</p>
<p>For each PID that needs to be processed, a ReassemblePSITables component is
created to handle reconstruction of that particular table.Transport Stream
packets arriving at the &quot;inbox&quot; inbox are sent to the relevant
ReassemblePSITables component for table reconstruction. Reconstructed tables
coming back from each ReassemblePSITables component are forwarded to all
destinations that have subscribed to it.</p>
<p>When ReassemblePSITablesServices starts or stops using packets of a given PID,
an 'add' or 'remove' message is also sent out of the &quot;pid_request&quot; outbox:</p>
<pre class="literal-block">
(&quot;ADD&quot;,    [pid], (self, &quot;inbox&quot;))
(&quot;REMOVE&quot;, [pid], (self, &quot;inbox&quot;))
</pre>
<p>This can be wired up to the source of transport stream packets, so that
ReassemblePSITablesService can tell that source what PIDs it needs.</p>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.html">Device</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.html">DVB</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.html">Parse</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables.html">ReassemblePSITables</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables.ReassemblePSITables.html">ReassemblePSITables</a></h1>
<div class="section">
<h2 id="symbol-ReassemblePSITables">class ReassemblePSITables(<a class="reference" href="/Docs/Axon/Axon.Component.component.html">Axon.Component.component</a>)</h2>
<p>Takes DVB Transport stream packets for a given PID and reconstructs the
PSI packets from within the stream.</p>
<p>Will only handle stream from a single PID.</p>
<div class="section">
<h3><a id="symbol-ReassemblePSITables.Inboxes" name="symbol-ReassemblePSITables.Inboxes">Inboxes</a></h3>
<ul class="simple">
</ul>
</div>
<div class="section">
<h3><a id="symbol-ReassemblePSITables.Outboxes" name="symbol-ReassemblePSITables.Outboxes">Outboxes</a></h3>
<ul class="simple">
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-ReassemblePSITables.main" name="symbol-ReassemblePSITables.main">main(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-ReassemblePSITables.shutdown" name="symbol-ReassemblePSITables.shutdown">shutdown(self)</a></h4>
</div>
</div>
<div class="section">
</div>
</div>
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.html">Device</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.html">DVB</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.html">Parse</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables.html">ReassemblePSITables</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ReassemblePSITables.ReassemblePSITablesService.html">ReassemblePSITablesService</a></h1>
<div class="section">
<h2 id="symbol-ReassemblePSITablesService">class ReassemblePSITablesService(<a class="reference" href="/Docs/Axon/Axon.AdaptiveCommsComponent.AdaptiveCommsComponent.html">Axon.AdaptiveCommsComponent.AdaptiveCommsComponent</a>)</h2>
<p>ReassemblePSITablesService() -&gt; new ReassemblePSITablesService component.</p>
<p>Subscribe to PSI packets by sending (&quot;ADD&quot;, (component,inbox), [PIDs] ) to &quot;request&quot;
Unsubscribe by sending (&quot;REMOVE&quot;, (component,inbox), [PIDs] ) to &quot;request&quot;</p>
<div class="section">
<h3><a id="symbol-ReassemblePSITablesService.Inboxes" name="symbol-ReassemblePSITablesService.Inboxes">Inboxes</a></h3>
<ul class="simple">
<li><strong>control</strong> : Shutdown signalling</li>
<li><strong>request</strong> : Place for subscribing/unsubscribing from different PSI packet streams</li>
<li><strong>inbox</strong> : Incoming DVB TS packets</li>
</ul>
</div>
<div class="section">
<h3><a id="symbol-ReassemblePSITablesService.Outboxes" name="symbol-ReassemblePSITablesService.Outboxes">Outboxes</a></h3>
<ul class="simple">
<li><strong>outbox</strong> : NOT USED</li>
<li><strong>signal</strong> : Shutdown signalling</li>
<li><strong>pid_request</strong> : For issuing requests for PIDs</li>
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-ReassemblePSITablesService.__init__" name="symbol-ReassemblePSITablesService.__init__">__init__(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-ReassemblePSITablesService.handleSubscribeUnsubscribe" name="symbol-ReassemblePSITablesService.handleSubscribeUnsubscribe">handleSubscribeUnsubscribe(self, msg)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-ReassemblePSITablesService.main" name="symbol-ReassemblePSITablesService.main">main(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-ReassemblePSITablesService.shutdown" name="symbol-ReassemblePSITablesService.shutdown">shutdown(self)</a></h4>
</div>
</div>
<div class="section">
</div>
</div>
</div>
</div>





<div class="section">
<h1>Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer?
Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback
<a class="reference" href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701">here</a>
in reply to the documentation thread in the Kamaelia blog.</p>
</div>


<p><i>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</i>
</body></html>

                </div> 
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home>5D">Kamaelia</a>
    is an open source project originated from and guided by BBC
    Research. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved.
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



