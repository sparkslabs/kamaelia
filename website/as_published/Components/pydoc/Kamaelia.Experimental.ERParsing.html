<html>
<head>
<title> Components/pydoc/Kamaelia.Experimental.ERParsing </title>
<link rel=stylesheet type="text/css" href="/newcss.css">
  </head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>

<div id="centreinbrowser">
    <table><tr><td>
        <div id="contentwrapper">
            <div id="contentpanel">
                <div class="column twoC largertext">  &nbsp; </div>
                <div class="column twoC largertext">  &nbsp;  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b><a href="/Home.html"> Home</a></b> </div>
                <div class="column twoC largertext"> 
<P class="orange" align="center"> 
<b><a href="/About.html" class="smallertext">About</a>, 
<a href="/Sitemap.html" class="smallertext">Index</a>, 
<a href="/RecentChanges.html" class="smallertext">Changes</a></b>
  </div>
                <div class="column twoC largertext"> <P class="orange" align="center">  <b> <a href="/Developers/">Developers</a> </b> </div>
                <div class="column last twoC"> <P class="orange" align="center"> 
<b>
   <span class="largertext"><a href="/UserLogin.html">Login</a>/<a href="/UserRegistration.html">Register</a> </span> 
  </b>
 </div>

<div class="divide"></div>
                <div id="masthead">
                    &nbsp;
                    <br>
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column">
                    &nbsp;
                </div>
                <div class="fourC column last">
                    &nbsp;
                </div>
<div class="divide"></div>
                <div class="twelveC column"> 
                <html>
<head>
<title>Kamaelia docs : Kamaelia.Experimental.ERParsing</title>
<style type="test/css">
pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }
</style>
</head>
<body>
<div class="container">
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.html">Experimental</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.ERParsing.html">ERParsing</a></h1>
</div>
<div class="section">
<div class="container">
<ul class="simple">
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERModel2Visualiser.html">ERModel2Visualiser</a></strong></li>
<li><strong>component <a class="reference" href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERParser.html">ERParser</a></strong></li>
</ul>
</div>
<ul class="simple">
<li><a class="reference" href="#566">Parser components for Entity-Relationship data</a><ul>
<li><a class="reference" href="#567">Example Usage:</a><ul>
</ul>
</li>
<li><a class="reference" href="#568">ERParser Behaviour</a><ul>
</ul>
</li>
<li><a class="reference" href="#569">ERModel2Visualiser Behaviour</a><ul>
</ul>
</li>
<li><a class="reference" href="#570">Entity-Relationship textual description format</a><ul>
</ul>
</li>
<li><a class="reference" href="#571">Parsed Entity-Relationship data</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section">
<h1 id="566">Parser components for Entity-Relationship data</h1>
<p>ERParser parses and buffers lines of text containing entity-relationship data.
Once a shutdown message is received, it emits the parsed data as a list of
entities and relationships.</p>
<p>ERModel2Visualiser transforms parsed entity-relationship data into textual
commands for the TopologyViewer component to produce a visualisation. The
TopologyViewer must be configured with suitable particle types - such as
<a class="reference" href="/Components/pydoc/Kamaelia.Visualisation.ER.ERVisualiserServer.ERVisualiser.html">Kamaelia.Visualisation.ER.ERVisualiserServer.ERVisualiser</a></p>
<p>See: <a class="reference" href="/Components/pydoc/Kamaelia.Visualisation.PhysicsGraph.TopologyViewer.TopologyViewer.html">Kamaelia.Visualisation.PhysicsGraph.TopologyViewer.TopologyViewer</a></p>
<div class="section">
<h2 id="567"><a id="example-usage" name="example-usage">Example Usage:</a></h2>
<p>A simple pipeline that reads in entity-relationship data from a file and writes
out commands, suitable for a topology visualiser, to the console:</p>
<pre class="literal-block">
from <a class="reference" href="/Components/pydoc/Kamaelia.File.ReadFileAdaptor.html">Kamaelia.File.ReadFileAdaptor</a> import ReadFileAdaptor
from <a class="reference" href="/Components/pydoc/Kamaelia.Util.PureTransformer.html">Kamaelia.Util.PureTransformer</a> import PureTransformer
from <a class="reference" href="/Components/pydoc/Kamaelia.Util.Console.html">Kamaelia.Util.Console</a> import ConsoleEchoer

Pipeline(
    ReadFileAdaptor(entity_relationship_data_file),
    ERParser(),
    ERModel2Visualiser(),
    PureTransformer(lambda x: pprint.pformat(x)+&quot;\n&quot;),
    ConsoleEchoer(),
).run()
</pre>
<p>Provide the following file of entity relationship data:</p>
<pre class="literal-block">
#
# entity relationship data in this file!
#

entity Artist:
    simpleattributes artisticname genre

entity Manager:
    simpleattributes ID name1 telephone

entity ContractInfo:
    simpleattributes contractID data_from data_to duration1

entity MasterTrack:
    simpleattributes trackID working_title duration2

entity SoundEngineer:
    simpleattributes sound_eng_ID name2

entity FinishedTrack:
    simpleattributes version final_duration released_title

entity Album:
    simpleattributes album_ID title

relation ManagedBy(Artist,Manager)
relation HasContract(Artist,ContractInfo)
relation RecordedBy(MasterTrack,Artist)
relation EditedBy(SoundEngineer,MasterTrack)
relation OriginatesFrom(FinishedTrack,MasterTrack)
relation GroupedOn(FinishedTrack,Album)
relation CreatedBy(Album,Artist)
</pre>
<p>Once the ReadFileAdaptor component has finished reading and terminates, the
ERParser component sends a message, containing the following, out of its
&quot;outbox&quot; outbox:</p>
<pre class="literal-block">
[['entity', {'name': 'Artist', 'simpleattributes': ['artisticname', 'genre']}],
 ['entity',
  {'name': 'Manager', 'simpleattributes': ['ID', 'name1', 'telephone']}],
 ['entity',
  {'name': 'ContractInfo',
   'simpleattributes': ['contractID', 'data_from', 'data_to', 'duration1']}],
 ['entity',
  {'name': 'MasterTrack',
   'simpleattributes': ['trackID', 'working_title', 'duration2']}],
 ['entity',
  {'name': 'SoundEngineer', 'simpleattributes': ['sound_eng_ID', 'name2']}],
 ['entity',
  {'name': 'FinishedTrack',
   'simpleattributes': ['version', 'final_duration', 'released_title']}],
 ['entity', {'name': 'Album', 'simpleattributes': ['album_ID', 'title']}],
 ['relation', {'entities': ['Artist', 'Manager'], 'name': 'ManagedBy'}],
 ['relation', {'entities': ['Artist', 'ContractInfo'], 'name': 'HasContract'}],
 ['relation', {'entities': ['MasterTrack', 'Artist'], 'name': 'RecordedBy'}],
 ['relation',
  {'entities': ['SoundEngineer', 'MasterTrack'], 'name': 'EditedBy'}],
 ['relation',
  {'entities': ['FinishedTrack', 'MasterTrack'], 'name': 'OriginatesFrom'}],
 ['relation', {'entities': ['FinishedTrack', 'Album'], 'name': 'GroupedOn'}],
 ['relation', {'entities': ['Album', 'Artist'], 'name': 'CreatedBy'}]]
</pre>
<p>And the following is output from the console:</p>
<pre class="literal-block">
'ADD NODE Artist Artist auto entity'
'ADD NODE artisticname artisticname auto attribute'
'ADD NODE genre genre auto attribute'
'ADD NODE Manager Manager auto entity'
'ADD NODE ID ID auto attribute'
'ADD NODE name1 name1 auto attribute'
'ADD NODE telephone telephone auto attribute'
'ADD NODE ContractInfo ContractInfo auto entity'
'ADD NODE contractID contractID auto attribute'
'ADD NODE data_from data_from auto attribute'
'ADD NODE data_to data_to auto attribute'
'ADD NODE duration1 duration1 auto attribute'
'ADD NODE MasterTrack MasterTrack auto entity'
'ADD NODE trackID trackID auto attribute'
'ADD NODE working_title working_title auto attribute'
'ADD NODE duration2 duration2 auto attribute'
'ADD NODE SoundEngineer SoundEngineer auto entity'
'ADD NODE sound_eng_ID sound_eng_ID auto attribute'
'ADD NODE name2 name2 auto attribute'
'ADD NODE FinishedTrack FinishedTrack auto entity'
'ADD NODE version version auto attribute'
'ADD NODE final_duration final_duration auto attribute'
'ADD NODE released_title released_title auto attribute'
'ADD NODE Album Album auto entity'
'ADD NODE album_ID album_ID auto attribute'
'ADD NODE title title auto attribute'
'ADD NODE ManagedBy ManagedBy auto relation'
'ADD NODE HasContract HasContract auto relation'
'ADD NODE RecordedBy RecordedBy auto relation'
'ADD NODE EditedBy EditedBy auto relation'
'ADD NODE OriginatesFrom OriginatesFrom auto relation'
'ADD NODE GroupedOn GroupedOn auto relation'
'ADD NODE CreatedBy CreatedBy auto relation'
'ADD LINK Artist artisticname'
'ADD LINK Artist genre'
'ADD LINK Manager ID'
'ADD LINK Manager name1'
'ADD LINK Manager telephone'
'ADD LINK ContractInfo contractID'
'ADD LINK ContractInfo data_from'
'ADD LINK ContractInfo data_to'
'ADD LINK ContractInfo duration1'
'ADD LINK MasterTrack trackID'
'ADD LINK MasterTrack working_title'
'ADD LINK MasterTrack duration2'
'ADD LINK SoundEngineer sound_eng_ID'
'ADD LINK SoundEngineer name2'
'ADD LINK FinishedTrack version'
'ADD LINK FinishedTrack final_duration'
'ADD LINK FinishedTrack released_title'
'ADD LINK Album album_ID'
'ADD LINK Album title'
'ADD LINK Artist ManagedBy'
'ADD LINK Manager ManagedBy'
'ADD LINK Artist HasContract'
'ADD LINK ContractInfo HasContract'
'ADD LINK MasterTrack RecordedBy'
'ADD LINK Artist RecordedBy'
'ADD LINK SoundEngineer EditedBy'
'ADD LINK MasterTrack EditedBy'
'ADD LINK FinishedTrack OriginatesFrom'
'ADD LINK MasterTrack OriginatesFrom'
'ADD LINK FinishedTrack GroupedOn'
'ADD LINK Album GroupedOn'
'ADD LINK Album CreatedBy'
'ADD LINK Artist CreatedBy'
</pre>
</div>
<div class="section">
<h2 id="568"><a id="erparser-behaviour" name="erparser-behaviour">ERParser Behaviour</a></h2>
<p>Send entity-relationship textual description data to the &quot;inbox&quot; inbox as
individual strings, one line per string.</p>
<p>When a producerFinished or shutdownMicroprocess is sent to the &quot;control&quot; inbox
this component sends out a single message containing, as a list, the entities
and relationships parsed from the data.</p>
<p>ERParser then immediately terminates and sends out the shudown message it
received out of its &quot;signal&quot; outbox.</p>
<p>See description of &quot;Entity-Relationship textual description format&quot; and
&quot;Parsed Entity-Relationship data&quot;.</p>
</div>
<div class="section">
<h2 id="569"><a id="ermodel2visualiser-behaviour" name="ermodel2visualiser-behaviour">ERModel2Visualiser Behaviour</a></h2>
<p>Send parsed entity-relationship data to the &quot;inbox&quot; inbox.</p>
<p>When a producerFinished or shutdownMicroprocess is sent to the &quot;control&quot; inbox
this component transforms it into a set of textual (string) commands suitable
for a TopologyViewer component and sends it out of its &quot;outbox&quot; outbox in two
messages. The first contains the commands to create the required nodes and the
second contains the commands to create the linkages between them.</p>
<p>ERModel2Visualiser then immediately terminates and sends out the shudown message
it received out of its &quot;signal&quot; outbox.</p>
<p>The TopologyViewer component that receives the commands must be configured to
know the following node types:</p>
<ul class="simple">
<li>entity     -- represents an entity</li>
<li>relation   -- represents the mid-point and name label of a relation</li>
<li>attribute  -- represents an attribute of an entity</li>
<li>isa        -- represents the mid-point and label of a subtype-supertype relation</li>
</ul>
<p>See description of &quot;Parsed Entity-Relationship data&quot;.</p>
</div>
<div class="section">
<h2 id="570"><a id="entity-relationship-textual-description-format" name="entity-relationship-textual-description-format">Entity-Relationship textual description format</a></h2>
<p>Entity relationship data is expressed as a text file. Blank lines or lines
beginning with a '#' character are ignored.</p>
<p>Define entities by writing <cite>entity NAME:</cite> on its own line, without indentation.
To define attributes for an entity, write, indented, on the next line,
<cite>simpleattributes</cite> followed by a space separated list of attributes.</p>
<p>To make an entity a subtype of another entity, begin the entity declaration
instead with <cite>entity NAME(SUPERTYPE):</cite>.</p>
<p>Example entities:</p>
<pre class="literal-block">
entity person:
    simpleattributes female name=sarah

# the following entities are subtypes of the 'person' entity

entity mum(person):

entity daughter(person):

entity son(person):
</pre>
<p>To define relations, write <cite>relation RELATION_NAME(ENTITY,ENTITY,...)</cite> on its
own line without indentation. A relation must involve two or more entities. For
example:</p>
<pre class="literal-block">
relation RelatedTo(mum,daughter,son)
relation siblings(son,daughter)
</pre>
</div>
<div class="section">
<h2 id="571"><a id="parsed-entity-relationship-data" name="parsed-entity-relationship-data">Parsed Entity-Relationship data</a></h2>
<p>The parsed data takes the form of a list of entities and relations.</p>
<p>An entity is represented as a list beginning with the string &quot;entity&quot;, followed
by a dictionary defining attributes. The key &quot;name&quot; maps to the name of the
entity:</p>
<blockquote>
[ &quot;entity&quot;, { &quot;name&quot;: &lt;name&gt;, &quot;simpleattributes&quot;: [ &lt;attribute&gt;, &lt;attribute&gt;, ... ], &quot;subtype&quot;: &lt;supertype-name&gt; ]</blockquote>
<p>The key &quot;simpleattributes&quot;, if present, maps to a list containing, as strings
each attribute.</p>
<p>Some may also contain a &quot;subtype&quot; key which maps to the name of the
entity that this one is a subtype of.</p>
<p>For example:</p>
<pre class="literal-block">
[ &quot;entity&quot;,
  { &quot;name&quot;             : &quot;person&quot;,
    &quot;simpleattributes&quot; : [ &quot;female&quot;, &quot;name=sarah&quot; ]
  }
]

[ &quot;entity&quot;,
  { &quot;name&quot; : &quot;mum&quot;,
    &quot;subtype&quot; : &quot;person&quot;
  }
]
</pre>
<p>A relation is represented as a list beginning with the string &quot;relation&quot;,
followed by a dictionary defining attributes:</p>
<blockquote>
[ &quot;relation&quot;, { &quot;name&quot;: &lt;name&gt;, &quot;entities&quot;: [ &lt;entity-name&gt;, &lt;entity-name&gt;, ... ]</blockquote>
<p>The key &quot;name&quot; maps to the name of the entity. The key &quot;entities&quot; maps to a list
containing, as strings, the names of the entities involved in the relation. For
example:</p>
<pre class="literal-block">
[ &quot;relation&quot;,
  { &quot;name&quot;     : &quot;IsA&quot;,
    &quot;entities&quot; : [ &quot;mum&quot;, &quot;person&quot; ]
  }
]
</pre>
</div>
</div>
<hr class="docutils" />
<div class="section">
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.html">Experimental</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.ERParsing.html">ERParsing</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERModel2Visualiser.html">ERModel2Visualiser</a></h1>
<div class="section">
<h2 id="symbol-ERModel2Visualiser">class ERModel2Visualiser(<a class="reference" href="/Docs/Axon/Axon.Component.component.html">Axon.Component.component</a>)</h2>
<p>ERModel2Visualiser() -&gt; new ERModel2Visualiser component.</p>
<p>Send parsed entity-relationship data as lists of entities and relations to
the &quot;inbox&quot; inbox. Once shutdown, sends out commands to drive a
TopologyViewer component to produce a visualisation of the described
entities and relations.</p>
<div class="section">
<h3><a id="symbol-ERModel2Visualiser.Inboxes" name="symbol-ERModel2Visualiser.Inboxes">Inboxes</a></h3>
<ul class="simple">
</ul>
</div>
<div class="section">
<h3><a id="symbol-ERModel2Visualiser.Outboxes" name="symbol-ERModel2Visualiser.Outboxes">Outboxes</a></h3>
<ul class="simple">
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-ERModel2Visualiser.main" name="symbol-ERModel2Visualiser.main">main(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-ERModel2Visualiser.shutdown" name="symbol-ERModel2Visualiser.shutdown">shutdown(self)</a></h4>
</div>
</div>
<div class="section">
</div>
</div>
<h1><a class="reference" href="/Components/pydoc/Kamaelia.html">Kamaelia</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.html">Experimental</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.ERParsing.html">ERParsing</a>.<a class="reference" href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERParser.html">ERParser</a></h1>
<div class="section">
<h2 id="symbol-ERParser">class ERParser(<a class="reference" href="/Docs/Axon/Axon.Component.component.html">Axon.Component.component</a>)</h2>
<p>ERParser() -&gt; new ERParser component.</p>
<p>Parses lines of Entity-Relationship data, send to the &quot;inbox&quot; inbox as
strings. Once shutdown, sends out a list of parsed entity and relationship
data.</p>
<div class="section">
<h3><a id="symbol-ERParser.Inboxes" name="symbol-ERParser.Inboxes">Inboxes</a></h3>
<ul class="simple">
</ul>
</div>
<div class="section">
<h3><a id="symbol-ERParser.Outboxes" name="symbol-ERParser.Outboxes">Outboxes</a></h3>
<ul class="simple">
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
<div style="float: right; border: solid;" class="twoC"> <p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div></div>
<div class="section">
<h4><a id="symbol-ERParser.main" name="symbol-ERParser.main">main(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-ERParser.shutdown" name="symbol-ERParser.shutdown">shutdown(self)</a></h4>
</div>
</div>
<div class="section">
</div>
</div>
</div>
</div>





<div class="section">
<h1>Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer?
Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback
<a class="reference" href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701">here</a>
in reply to the documentation thread in the Kamaelia blog.</p>
</div>


<p><i>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</i>
</body></html>

                </div> 
                <div id="footer">
                    &nbsp;
                    <br>&nbsp;
                </div>


<div class="divide"></div>
            </div>
        </div>
    </td></tr></table>


<hr>
<div id="aboutblock" style="text-align: left"; padding-left: 1em;>
<font size="-2">
   <P><img src="http://www.kamaelia.org/images/BBC-ResearchLogo-Small.png"
style="float: left; padding-right: 10px; margin-bottom: 3em;"> <a href="http://www.kamaelia.org/Home>5D">Kamaelia</a>
    is an open source project originated from and guided by BBC
    Research. For more information browse the site or get in 
    <a href="/Contact.html">contact</a>.
   <P>This is an ongoing community based development site. As a result the
   contents of this page is the opinions of the contributors of the pages
   involved not the organisations involved. Specificially, this page may
   contain personal views which are not the views of the BBC. (the site is
   powered by a wiki engine)
   <P>(C) Copyright 2008 Kamaelia Contributors, including the British
   Broadcasting Corporation, All Rights Reserved.
</font>
</div>
</div>
<div style="display:none">
This web site is powered by the same code created for the
<a href="http://www.bickermanor.org/"> bicker manor</a> project. For more
details, contact Michael Sparks at BBC Research directly (cf contact)
</div>
</body>
</html>



