<html><head><meta name="qrichtext" content="1" />
<style>
.subsection { }
.sectionheader {
                 text-align: center;
                 font-weight: bold;
                 padding-bottom: 1em;
               }
.sectioncontent { font-size: 0.9em;
                  margin-left: 2em;
                  line-height: 1.8;
                  text-align: left;
                }
.verticaldivider { float: bottom;
                   width: 100%;
                 }
.none { width: 100%;
        clear: both;
      }

 .rbroundbox_green { background: url(/t/green.corners-top.png) repeat-x; 
               width: 50%;
               float: right;
               }
 .rbtop_green div { background: url(/t/green.corners-topleft.png) no-repeat top left; }
 .rbtop_green { background: url(/t/green.corners-topright.png) no-repeat top right; }

 .rbcontent_green div { background: url(/t/green.corners-right.png) repeat-y right; 
                }
 .rbcontent_green { background: url(/t/green.corners-left.png) repeat-y left; 
              padding-left: 1.5em;
            }

 .rbbot_green div { background: url(/t/green.corners-bottomleft.png) no-repeat bottom left; }
 .rbbot_green { background: url(/t/green.corners-bottomright.png) no-repeat bottom right; }
 .rbbottom_green { background: url(/t/green.corners-bottom.png) repeat-x; }
 .rbtop_green div, .rbtop_green, .rbbot_green div, .rbbot_green {
 width: 100%;
 height: 23px;
 font-size: 1px;
 }
body {
   text-align: justify;
}
.boxright {
    float: right;
    width: 20em;
    padding: 0.5em;
    margin: 1em;

    border: 1px solid;
}
.sidebar {
    width: 10em;
    float: left;
    padding: 1em;

}
.bodytext {

    margin: 0 5em 0em 12em;
    float: auto;
    padding-left: 1em;
    padding-right: 1em;
}
</style>
</head><body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
<p><span style="font-size:24pt;font-weight:600">Cookbook Example</span></p>
<p align="right"><span style="font-size:18pt">How can I...?</span></p>
<p>Example 10: Simple dirac encoder/decoder. Shows how to read raw video frames from a file, encode them using dirac, decode them again, and then playback via a video overlay. <span style="font-weight:600">Components used: </span><a href="/Components/pydoc/Kamaelia.ReadFileAdaptor.ReadFileAdaptor.html">ReadFileAdaptor</a>, <a href="/Components/pydoc/Kamaelia.Codec.RawYUVFramer.RawYUVFramer.html">RawYUVFramer</a>, <a href="/Components/pydoc/Kamaelia.Codec.Dirac.DiracEncoder.html">DiracEncoder</a>, <a href="/Components/pydoc/Kamaelia.Codec.Dirac.DiracDecoder.html">DiracDecoder</a>, <a href="/Components/pydoc/Kamaelia.UI.Pygame.VideoOverlay.VideoOverlay.html">VideoOverlay</a> .</p>
<p>Download and build dirac first!</p>
<p>Get the source raw video file (in rgb format) from here, and gunzip it:</p>
<p>http://sourceforge.net/project/showfiles.php?group_id=102564&amp;package_id=119507</p>
<p>To convert RGB to YUV:</p>
<ul type="disc"><div>RGBtoYUV420 snowboard-jum-352x288x75.rgb snowboard-jum-352x288x75.yuv 352 288 75</div></ul>
<p>Alternatively, source your own AVI file and convert with:</p>
<ul type="disc"><div>ffmpeg -i file_from_digital_camera.avi rawvideo.yuv</div></ul>
<p>and alter the config below as required.</p>
<ul type="disc"><div><pre><span style="font-style:italic">#!/usr/bin/python</span><br /><br /><span style="font-weight:600">from</span> Kamaelia.Util.PipelineComponent <span style="font-weight:600">import</span> pipeline<br /><span style="font-weight:600">from</span> Kamaelia.ReadFileAdaptor <span style="font-weight:600">import</span> ReadFileAdaptor<br /><span style="font-weight:600">from</span> Kamaelia.Codec.RawYUVFramer <span style="font-weight:600">import</span> RawYUVFramer<br /><span style="font-weight:600">from</span> Kamaelia.Codec.Dirac <span style="font-weight:600">import</span> DiracEncoder, DiracDecoder<br /><span style="font-weight:600">from</span> Kamaelia.UI.Pygame.VideoOverlay <span style="font-weight:600">import</span> VideoOverlay<br /><br />FILENAME  = &quot;/data/dirac-video/snowboard-jum-352x288x75.yuv&quot;<br />SIZE = (352,288)<br />DIRACPRESET = &quot;CIF&quot;         # dirac resolution and encoder settings preset<br /><br /><span style="font-style:italic;font-weight:600"># encoder param sets it to iframe only (no motion based coding, faster)<br /># (overrides preset)<br /></span>ENCPARAMS = {&quot;num_L1&quot;:0}<br /><br />pipeline( ReadFileAdaptor(FILENAME, readmode=&quot;bitrate&quot;, bitrate= 1000000),<br />          RawYUVFramer( size=SIZE ),<br />          DiracEncoder(preset=DIRACPRESET, encParams=ENCPARAMS ),<br />          DiracDecoder(),<br />          VideoOverlay()<br />        ).run()<br /></pre> <span style="font-weight:600">Source: </span>Examples/example10/SimpleDiracEncodeDecode.py</div></ul>
<p></p>

<div class="none"></div>
<P><hr width='100%%'>
<p>
(C) 2006 Kamaelia Contributors, including the British Broadcasting
Corporation, All Rights Reserved,
This is an ongoing community based development site. As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved. Specificially, this page may
contain personal views which are not the views of the BBC. 

</body></html>

