<?xml version="1.0" encoding="utf-8" ?>
<rss version="2.0" xmlns:admin="http://webns.net/mvcb/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:html="http://www.w3.org/1999/html" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:slash="http://purl.org/rss/1.0/modules/slash/"><channel><title>Random notes from mg</title><link>http://mg.pov.lt/blog</link><description>a blog by Marius Gedminas</description><language>en</language><ttl>60</ttl><dc:creator>Marius Gedminas</dc:creator><admin:generatorAgent rdf:resource="http://pyblosxom.sourceforge.net/"/><admin:errorReportsTo rdf:resource="mailto:mgedmin@b4net.lt"/><item><title>PowerTop as GNOME applet?</title><guid isPermaLink="false">powertop-as-gnome-applet</guid><link>http://mg.pov.lt/blog/powertop-as-gnome-applet</link><description>Dear lazyweb, Where's the GNOME applet that can show me my laptop's power usage in Watt? I cannot believe that ...</description><content:encoded><![CDATA[
<p>Dear lazyweb,</p>

<p>Where's the GNOME applet that can show me my laptop's power usage in
Watt?  I cannot believe that nobody has written one yet.</p>
]]></content:encoded><dc:date>2008-06-05T21:21:25Z</dc:date></item><item><title>LinuxTag 2008, day 4</title><guid isPermaLink="false">linuxtag-day-4</guid><link>http://mg.pov.lt/blog/linuxtag-day-4</link><description>The last day. Saw a bunch of interesting talks about freedesktop.org, Ekiga, GNOME and Ubuntu. Jono Bacon's talk was very ...</description><content:encoded><![CDATA[
<p>The last day.  Saw a bunch of interesting talks about freedesktop.org,
Ekiga, GNOME and Ubuntu.  Jono Bacon's talk was very interesting.  I think if
Nokia is interested in building a healthy developer community, they would do
well to talk to Jono about it.</p>

<p>Got a USB gender-bender from Kees Jongenburger -- now I can plug in 
USB devices to my N810, provided that they don't require too much power (extra
software required: usbcontrol from Maemo Extras). I owe you one Kees!</p>

<p>Discovered that the GNOME booth does in fact have T-shirts for sale, they're
just not out on display like in other booths.  Sadly, since I discovered that
during the last hour of the last day of the conference, only extra large
T-shirts were left.  Spent my last 10 EUR in cash on the T-shirt anyway.
;-)</p>

<p>Met MaryBeth Panagos from OpenMediaNow, learned about interesting happenings
with Gnash, open media codecs and Ubuntu Mobile.  Raised my hopes for a
brighter future.  Showed off my N810 and expressed my hopes for Gnash replacing
the closed Adobe Flash player on it.  It won't happen any time soon -- everyone
wants it now!, but there are few developers actually working on it.</p>

<p>Went to a very geeky cafe/computer club c-base for the Ubuntu BBQ.  Almost
didn't find the place, but one of the LinuxTag guys happened to be going back
at just the right moment to show me the path hidden behind the bushes.</p>

<p>Feeling content now.  Well, missing free (or at least paid, but working --
boo, Swisscom, boo!) WiFi at the hotel, but other than that I've had a
wonderful time.</p>
]]></content:encoded><dc:date>2008-06-01T13:23:14Z</dc:date></item><item><title>LinuxTag 2008, day 3</title><guid isPermaLink="false">linuxtag-day-3</guid><link>http://mg.pov.lt/blog/linuxtag-day-3</link><description>After getting my presentation out of the way, I was finally able to relax and really enjoy LinuxTag. I hadn't ...</description><content:encoded><![CDATA[
<p>After getting my presentation out of the way, I was finally able to relax
and really enjoy LinuxTag.  I hadn't realised quite how stressed I was about
the talk.  I'm really happy now that I agreed to come.</p>

<p>Watched an amazing demo in the <a
href="http://www.linuxmce.org/">LinuxMCE</a> booth.  I always though it was
some kind of a media center app for watching movies, but it turns out to be a
complete home automation system where you can control the lights, security
cameras and, of course, multimedia, with a large variety of devices (remote
controls, mobile phones, VoIP hardware phones, Nokia Internet tablets).
Still, I'd have to get a house first.</p>

<p>After the conference I went out for a beer (or, rather, a cup of Earl
Grey) in the city with Gary "lcuk" Birkett and Malgorzata Ciesielska, who is
doing her PhD on Nokia/Maemo community organisation/collaboration.  Had a
really nice evening.</p>
]]></content:encoded><dc:date>2008-05-31T16:17:40Z</dc:date></item><item><title>LinuxTag 2008, day 2</title><guid isPermaLink="false">linuxtag-day-2</guid><link>http://mg.pov.lt/blog/linuxtag-day-2</link><description>The day just flew by. We had all the Maemo community talks. Some people have asked me to put my ...</description><content:encoded><![CDATA[
<p>The day just flew by.  We had all the Maemo community talks. Some people
have asked me to put my LinuxTag presentation online, so here it is: <a
href="http://mg.pov.lt/maemo-thoughts-linuxtag.pdf">What do I want from
Maemo?</a>.</p>

<p>In the evening we went to a nice outdoors cafe in a large and beautiful park
(Tiergaten) and talked about various things until 1 AM.</p>

<p>My email is piling up, and Google Reader is overflowing.</p>
]]></content:encoded><dc:date>2008-05-30T10:55:40Z</dc:date></item><item><title>LinuxTag 2008</title><guid isPermaLink="false">linuxtag-day-1</guid><link>http://mg.pov.lt/blog/linuxtag-day-1</link><description>Nokia kindly invited me to speak about Maemo at LinuxTag 2008. WiFi is a bit problematic here. At the hotel ...</description><content:encoded><![CDATA[
<p>Nokia kindly invited me to speak about Maemo at LinuxTag 2008.</p>

<p>WiFi is a bit problematic here.  At the hotel there's no free wifi, you
can buy some kind of access from Swisscom at silly prices (8 EUR for 1 hour,
with a 100 MB download limit) with silly limitations, and besides my laptop
refuses to associate with the AP and doesn't even get to the login page.</p>

<p>WiFi works at LinuxTag itself (at least in the conference rooms; the expo
hall was spotty), but you have to visit a pointless and slow web page and press
a button labeled 'Go' before they let you ssh around.  I fail to see the point,
but at least I can get my email now.</p>

<p>Everyone is very nice here.  I only attened one talk by now (Cristoph
Hellwig's interesting talk about xfs), but I hardly saw any open laptops in
the audience.</p>

<p>The Berlin public transport system is not difficult to figure out.  The
N810's built-in GPS is not useful in practice.  I got a fix exactly once after
standing for about 10 minutes outside of the hotel.  Maemo Mapper is useful for
figuring out your actual location on the map, as you're listening to station
names on the bus.</p>

<p>Met some people (hi, Dave!).  My memory for names is still atrocious.  My
bad eyesight doesn't let me read badges easily, either.  By the way, if you're
designing badges that will hang from a lanyard, please print them with the same
text on <em>both sides</em>.</p>
]]></content:encoded><dc:date>2008-05-28T11:18:13Z</dc:date></item><item><title>Shell commands I use most</title><guid isPermaLink="false">shell-history-stats</guid><link>http://mg.pov.lt/blog/shell-history-stats</link><description>Couldn't resist the meme that has resurfaced lately. $ history|awk '{a[$2]++ } END{for(i in a){print a[i] &quot; &quot; i}}'|sort -rn|head ...</description><content:encoded><![CDATA[
<p>Couldn't resist the <a href="http://bethesignal.org/?p=1057">meme</a> that
has resurfaced lately.</p>

<blockquote><pre>
<span class="prompt">$</span> <span class="typing">history|awk '{a[$2]++ } END{for(i in a){print a[i] " " i}}'|sort -rn|head</span>
14780 cd
3010 svn
2366 ls
1957 ssh
1563 svnst
1285 ml
1048 bin/test
957 vi
952 sudo
837 offlineimap
</pre></blockquote>

<p>'svnst' is an alias for 'svn status'.  'ml' is a little wrapper around
<a href="http://mailcheck.sourceforge.net/">mailcheck</a> that reformats the
output to fit on two lines.</p>

<p>The numbers are rather high because I added a couple of lines to my
~/.bashrc to have more history:</p>

<blockquote><pre>
export HISTFILESIZE=
export HISTSIZE=50000
</pre></blockquote>

<p>What's sudo doing in the top 10?</p>

<blockquote><pre>
<span class="prompt">$</span> <span class="typing">history|awk '$2=="sudo" {a[$3]++ } END{for(i in a){print a[i] " " i}}'|sort -rn|head</span>
99 vi
68 apt-get
67 -s
45 ifup
40 rmmod
37 umount
37 iwconfig
35 modprobe
31 iwlist
26 powertop
</pre></blockquote>
]]></content:encoded><dc:date>2008-04-10T13:46:15Z</dc:date></item><item><title>Happiness is...</title><guid isPermaLink="false">n810</guid><link>http://mg.pov.lt/blog/n810</link><description>... not having a headache. In other news, my Nokia N810 Internet Tablet finally arrived. It looks better in real ...</description><content:encoded><![CDATA[
<p>... not having a headache.</p>

<p>In other news, my <a href="http://en.wikipedia.org/wiki/Nokia_N810">Nokia
N810 Internet Tablet</a> finally arrived.  It looks better in real life than in
pictures.</p>

<p>Strange quirk: the 2 gigs of extra internal flash memory (formatted as
FAT32) are mostly unused (according to df) while at the same time being
three quarters full (according to du):</p>

<pre>
<span class="prompt">/media/mmc2 $</span> <span class="typing">df -h .</span>
Filesystem                Size      Used Available Use% Mounted on
/dev/mmcblk0p1            1.9G      8.0k      1.9G   0% /media/mmc2
<span class="prompt">/media/mmc2 $</span> <span class="typing">du -sh .</span>
1.5G    .
</pre>

<p>Ouch. Time to run fsck.vfat on it.  Or perhaps just reformat, to avoid the
other famous bug (<a href="https://bugs.maemo.org/show_bug.cgi?id=2802">attempt
to access beyond end of device</a>), which, let me check, yes, I also see:</p>

<pre>
[584959.868000] usb-storage: device scan complete
[584959.868000] scsi 3:0:0:0: Direct-Access     Nokia    N810              031 PQ: 0 ANSI: 2
[584959.868000] scsi 3:0:0:1: Direct-Access     Nokia    N810              031 PQ: 0 ANSI: 2
[584959.872000] sd 3:0:0:0: [sdb] 3932160 512-byte hardware sectors (2013 MB)
[584959.872000] sd 3:0:0:0: [sdb] Write Protect is off
[584959.872000] sd 3:0:0:0: [sdb] Mode Sense: 0f 00 00 00
[584959.872000] sd 3:0:0:0: [sdb] Assuming drive cache: write through
[584959.872000] sd 3:0:0:0: [sdb] 3932160 512-byte hardware sectors (2013 MB)
[584959.876000] sd 3:0:0:0: [sdb] Write Protect is off
[584959.876000] sd 3:0:0:0: [sdb] Mode Sense: 0f 00 00 00
[584959.876000] sd 3:0:0:0: [sdb] Assuming drive cache: write through
[584959.876000]  sdb: sdb1
[584959.880000]  sdb: <span class="important">p1 exceeds device capacity</span>
[584959.884000] sd 3:0:0:0: [sdb] Attached SCSI removable disk
[584959.884000] sd 3:0:0:0: Attached scsi generic sg2 type 0
[584959.884000] sd 3:0:0:1: [sdc] Attached SCSI removable disk
[584959.884000] sd 3:0:0:1: Attached scsi generic sg3 type 0
[584960.240000] attempt to access beyond end of device
[584960.240000] sdb: rw=0, want=4013848, limit=3932160
[584960.240000] Buffer I/O error on device sdb1, logical block 501728
</pre>

<p>It would be interesting to know how this came to be.  Do some N810s have
more internal memory than others?  Or was the filesystem image made too big
for all of them by accident?</p>
]]></content:encoded><dc:date>2008-03-21T21:54:09Z</dc:date></item><item><title>Discovery of the day</title><guid isPermaLink="false">python-zipfile</guid><link>http://mg.pov.lt/blog/python-zipfile</link><description>If you have python but not unzip (consider, e.g. a Nokia Internet Tablet ), you can extract zip files with ...</description><content:encoded><![CDATA[
<p>If you have python but not unzip (consider, e.g. a <a
href="http://en.wikipedia.org/wiki/Nokia_N800">Nokia Internet Tablet</a>), you
can extract zip files with</p>

<blockquote><pre>
python -m zipfile -e <em>filename</em>.zip .
</pre></blockquote>
]]></content:encoded><dc:date>2008-01-22T12:08:28Z</dc:date></item><item><title>Nokia can has web server pls?</title><guid isPermaLink="false">nokia-complaint</guid><link>http://mg.pov.lt/blog/nokia-complaint</link><description>The inability of Nokia to provide reliable web servers for repository.maemo.org and tablets-dev.nokia.com is annoying. I am unable to build ...</description><content:encoded><![CDATA[
<p>The inability of Nokia to provide reliable web servers for
repository.maemo.org and tablets-dev.nokia.com is annoying.  I am unable to
build packages for N810 because the apt repository that contains build
dependencies is down, and apparently has been down for a couple of days
already.</p>
]]></content:encoded><dc:date>2007-12-20T23:33:09Z</dc:date></item><item><title>Linux on a Thinkpad T23</title><guid isPermaLink="false">linux-on-t23</guid><link>http://mg.pov.lt/blog/linux-on-t23</link><description>Andrew Dalke writes about his painful attempts to install Ubuntu Feisty on a Thinkpad T23 . I've had a T23 ...</description><content:encoded><![CDATA[
<p>Andrew Dalke writes about his <a
href="http://www.dalkescientific.com/writings/diary/archive/2007/12/20/installing_linux.html">painful
attempts to install Ubuntu Feisty on a Thinkpad T23</a>.  I've had a T23 and
ran various versions of Ubuntu on it happily.  When it works, Ubuntu (and Linux
in general) is great; when it doesn't work, it is painful (but at least I can
fix it, unlike, say, Windows).<p>

<p>One thing, though: the T23 doesn't support USB2.  Using an external hard
disk over USB1 is very slow and uncomfortable.  Also, I wonder what sort of an
install disk Andrew used.  It sounds like a server or alternate install CD --
the regular desktop CD installs X and everything else for you.</p>
]]></content:encoded><dc:date>2007-12-20T16:33:25Z</dc:date></item><item><title>Testing unit test coverage</title><guid isPermaLink="false">coverage-testing</guid><link>http://mg.pov.lt/blog/coverage-testing</link><description>Lars Wirzenius writes about measuring unit test coverage with coverage.py . I've been doing the same thing with trace.py from ...</description><content:encoded><![CDATA[
<p>Lars Wirzenius writes about <a
href="http://liw.iki.fi/liw/log2/2007-12-16a.html">measuring unit test
coverage</a> with <a
href="http://nedbatchelder.com/code/modules/coverage.html">coverage.py</a>.</p>

<p>I've been doing <a href="http://schooltool.pov.lt/coverage/">the same
    thing</a> with <a
    href="http://python.org/doc/current/lib/module-trace.html">trace.py</a>
from the Python standard library, and the <a
    href="http://cheeseshop.python.org/pypi/zope.testing/">Zope 3 test
    runner</a>.  The pretty HTML output is generated by <a
    href="http://cheeseshop.python.org/pypi/z3c.coverage">z3c.coverage</a> by a
nightly <a href="http://buildbot.net/">buildbot</a> run, and any regressions in
test coverage are reported via email ("module foo.bar got 5 new untested lines
of code"), also thanks to z3c.coverage.</p.

<p>I wonder about the differences between coverage.py and trace.py sometimes,
but so far I haven't found the time to investigate.</p>

<p><small>This is the point where I wish PyBlosxom had a simple-to-install,
    spam-proof comment plugin.  Oh well, there's a mailto: link below each
    post.</small></p>
]]></content:encoded><dc:date>2007-12-16T13:05:09Z</dc:date></item><item><title>Easy easy_install on Ubuntu Gutsy</title><guid isPermaLink="false">easy-easy-install</guid><link>http://mg.pov.lt/blog/easy-easy-install</link><description>I want to be able to install small and simple Python packages from Cheeseshop by typing ' easy_install packagename '. ...</description><content:encoded><![CDATA[
<p>I want to be able to install small and simple Python packages from <a
    href="http://pypi.python.org/pypi">Cheeseshop</a> by typing
'<tt>easy_install <em>packagename</em></tt>'.  This does not work out of the
box on Ubuntu Gutsy (even after installing python-setuptools): easy_install
tries to install stuff into /usr, which (a) requires root permissions and (b)
is just Not Done on Linux, where /usr belongs to the distribution's package
manager<sup class="footnote">1</sup>.</p>

<blockquote class="footnotes">
<p><sup>1</sup> /usr/local is for extra stuff.  I consider it a bug in
setuptools that it prefers /usr over /usr/local.</p>
</blockquote>

<p>So, here's a quick HOWTO distilled from the <a
    href="http://peak.telecommunity.com/DevCenter/EasyInstall#traditional-pythonpath-based-installation">easy_install
    documentation</a> <strong>and improved by a suggestion from Audrius
    Kažukauskas to use aliases instead of ~/.pydistutils.conf</strong>:</p>

<ol>
    <li value="0"><strong><tt>sudo apt-get install python-setuptools</tt></strong></li>
    <li><tt>mkdir ~/bin ~/py-lib</tt></li>
    <li>Add the following near the top of your ~/.bashrc:
    <blockquote><pre>
export PYTHONPATH=~/py-lib
<strong>alias easy_install="easy_install -s ~/bin -d ~/py-lib"</strong>
</pre></blockquote></li>
    <li>Make sure your ~/.bash_profile contains
    <blockquote><pre>
PATH=~/bin:"${PATH}"
. ~/.bashrc
</pre></blockquote></li>
    <li><strong>Remove ~/.pydistutils.cfg if you created one by following
an earlier version of this HOWTO</strong></li>
</ol>

<p>This is not the recommended method of installation, but it is
certainly the simplest one (from my point of view), and appears to work with
the sort of simple pure-Python packages that I installed.  I guess I'll stick
with it until it breaks.</p>

<p><strong>Update:</strong> the custom ~/.pydistutils.cfg file breaks <a
href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>.</p>

<p><strong>Update 2:</strong> Audrius Kažukauskas suggested using an alias
instead of the custom ~/.pydistutils.cfg file.</p>

<p><strong>Update 3:</strong> I should've mentioned before that you need
to apt-get install python-setuptools.</p>
]]></content:encoded><dc:date>2007-11-08T18:59:24Z</dc:date></item><item><title>profilehooks 1.1</title><guid isPermaLink="false">profilehooks-1.1</guid><link>http://mg.pov.lt/blog/profilehooks-1.1</link><description>profilehooks is now a proper Python egg. Other changes since 1.0: new output formatting options ( contributed by Hanno Schlichting ...</description><content:encoded><![CDATA[
<p><a href="http://mg.pov.lt/profilehooks">profilehooks</a> is now a proper
Python egg.</p>

<p>Other changes since 1.0:</p>
<ul>
<li>new output formatting options (<a href="http://www.openplans.org/projects/plone-performance-sprint-2007">contributed by Hanno Schlichting</a>)</li>
<li>the decorators should not interfere with doctests any more.</li>
</ul>
]]></content:encoded><dc:date>2007-11-07T17:19:17Z</dc:date></item><item><title>Simplifying dependency graphs with graphviz</title><guid isPermaLink="false">simplifying-dependency-graphs</guid><link>http://mg.pov.lt/blog/simplifying-dependency-graphs</link><description>Remember the package dependency graph of z3c.formdemo produced by tl.eggdeps ? the insane graph, scaled down from 14153x2729 to 480x93 ...</description><content:encoded><![CDATA[
<p>Remember the package dependency graph of z3c.formdemo produced by
<a href="http://pypi.python.org/pypi/tl.eggdeps">tl.eggdeps</a>?</p>

<center><img src="http://mg.pov.lt/z3c.formdemo-deps-small.png" border="0"
width="480" height="93" alt="z3c.formdemo dependency graph (small version)"
/><br /><small>the insane graph, scaled down from 14153x2729 to 480x93</small></center>

<p>If you filter the dot file through <a
href="http://www.linuxfromscratch.org/blfs/view/svn/general/graphviz.html#tred">tred</a>
from the graphviz suite of tools, it will remove redundant dependencies (that
are already implied by transitivity) and produce something acutally useful:</p>

<center><a href="http://mg.pov.lt/z3c.formdemo-deps-tred.png"><img
src="http://mg.pov.lt/z3c.formdemo-deps-tred-small.png" border="0" width="480"
height="426" alt="z3c.formdemo dependency graph filtered by tred (small version)"
/></a><br /><small>the useful graph, scaled down from 2695 x 2394 to 480x426</small></center>
]]></content:encoded><dc:date>2007-09-28T15:21:41Z</dc:date></item><item><title>Foliage sprint day 2</title><guid isPermaLink="false">foliage-sprint-day-2</guid><link>http://mg.pov.lt/blog/foliage-sprint-day-2</link><description>Stephan Richter convinced me to try the ZCML optimization task . Zope 3 parses and interprets hundreds of little ZCML ...</description><content:encoded><![CDATA[
<p>Stephan Richter convinced me to try the <a
href="http://wiki.zope.org/zope3/FoliageSprint#zcml-optimizations">ZCML
optimization task</a>.  Zope 3 parses and interprets hundreds of little ZCML
configuration files on startup.  The idea was that if we can cache pre-parsed
configuration on disk, we could speed up Zope 3 startup by 30&ndash;50%.</p>

<p>I originally tried this approach <a
href="http://mail.zope.org/pipermail/zope3-dev/2004-July/011726.html">back in
2004</a> but couldn't get it to work.  Today, thanks to Stephan Richter, who
took over the most boring and difficult parts (making view directives
pickleable), we got to a point where Zope 3 works after loading the
configuration pickle instead of parsing ZCMLs (and starts up in 2 seconds
instead of 3).</p>

<p>The code is still at a prototype/proof-of-concept level, full of ugly hacks.
The tests are also not very happy (68 failures, 115 errors out of 6955 tests).
The <a
href="http://mg.pov.lt/zope3-trunk-svn79995-zcml-picklification.diff">patch</a>
describes the changes in greater detail. </p>

<p>We also had a nice dinner in a Japanese all-you-can-eat buffet called <a
href="http://maps.google.com/maps?f=q&hl=en&q=Minado+the+Ultimate+Sushi+Buffet&ie=UTF8&sll=37.062500,-95.677068&sspn=23.875000,57.630033&latlng=42298992,-71382951,6454920243526492880&ei=ANX5RtGlIYnKrALu1KH9DA&sig2=EeOzJFwVnG_EtBKZeFCzWA&cd=1">Minado</a>.</p>
]]></content:encoded><dc:date>2007-09-26T03:46:33Z</dc:date></item><item><title>Foliage sprint day 1</title><guid isPermaLink="false">foliage-sprint-day-1</guid><link>http://mg.pov.lt/blog/foliage-sprint-day-1</link><description>One of the reasons I wanted to come to the Foliage sprint was to get acquainted with the brave new ...</description><content:encoded><![CDATA[
<p>One of the reasons I wanted to come to the <a
href="http://wiki.zope.org/zope3/FoliageSprint">Foliage sprint</a> was to get
acquainted with the brave new world of Zope 3 eggs.  For this reason
I chose to work on package dependency simplification.</p>

<p>I spent a couple of hours reading setuptools documentation, easy_install
and zc.buildout source code, trying to figure out the right way to extract
dependency information from a set of eggs.  Then <a
href="http://www.philikon.de/">philiKON</a> mentioned <a
href="http://pypi.python.org/pypi/tl.eggdeps">tl.eggdeps</a> to me.  Yay!</p>

<p>Running it on z3c.formdemo produced a huge and unreadable graph.  The
original was 14153x2729 pixels, here's how it looks when zoomed out:</p>

<center><img src="http://mg.pov.lt/z3c.formdemo-deps-small.png" border="0"
width="480" height="93" alt="z3c.formdemo dependency graph (small version)"
/></center>

<p>The text version of the dependency tree was better, but not too convenient
either.  I got the idea of an interactive dependency tree viewer so that I
could expand only those parts I'm interested in and ignore the others.
That's what I worked on for the rest of the day:</p>

<center><a href="http://mg.pov.lt/gtkeggdeps/"><img alt="Gtk+ egg dependency viewer"
width="644" height="462" border="0" src="http://mg.pov.lt/gtkeggdeps/gtkeggdeps.png" /></a></center>

<p>You can <tt>easy_install gtkeggdeps</tt> and inspect the dependencies
of all your installed packages.</p>
]]></content:encoded><dc:date>2007-09-25T02:24:25Z</dc:date></item><item><title>Foliage Sprint</title><guid isPermaLink="false">foliage-sprint</guid><link>http://mg.pov.lt/blog/foliage-sprint</link><description>I'm at the Zope 3 Foliage Sprint . The main point of this post is to fix the fact that ...</description><content:encoded><![CDATA[
<p>I'm at the Zope 3 <a href="http://wiki.zope.org/zope3/FoliageSprint">Foliage
Sprint</a>.  The main point of this post is to fix the fact that the canonical
sprint wiki page is not even on the first page of Google results.</p>

<p><strong>Update:</strong> apparently that's caused by </p>

<pre>&lt;meta name="robots" content="noindex" /&gt;</pre>

<p>in the HTML.</p>
]]></content:encoded><dc:date>2007-09-24T13:12:53Z</dc:date></item><item><title>New laptop: Lenovo T61</title><guid isPermaLink="false">t61</guid><link>http://mg.pov.lt/blog/t61</link><description>A week and a half ago I bought a new laptop: a Lenovo T61 (the 15&quot; widescreen version). It's big ...</description><content:encoded><![CDATA[
<p>A week and a half ago I bought a new laptop: a <a
    href="http://www.thinkwiki.org/wiki/Category:T61">Lenovo T61</a> (the 15"
widescreen version).  It's big and not very pretty (but the large screen is
very nice), and was a big pain to install.  After several days of fiddling I've
got Ubuntu Gutsy running on it quite well, with nearly all hardware working.</p>

<p><strong>Installation:</strong> I used Gutsy Tribe 3 Alternate CD (because
the desktop CD either wouldn't boot, or would give me a blank screen).  I had
to finish the installation by touch (by pressing Enter whenever the CD spun
down), because in the middle of installing packages, after installing
xresprobe, the screen went blank and never came back.  I think I could've
used the regular CD if I thought to set SATA to Compatibility in the BIOS
earlier.</p>

<p><strong>Video (Intel 965GM, 1280x800):</strong> worked out of the box (with
the 'intel' driver) with all xrandr 1.2 and 3D Compiz goodness.  One minor bug,
already fixed upstream: GDM and gnome panels were limited to upper-left
1024x768 area because X thought it had a TV connected.  I added <tt>xrandr
    --output TV --off</tt> into /etc/gdm/Init/Default as a workaround.  There
are some minor problems (text consoles sometimes work and sometimes show a
blank screen; xv doesn't work with XAA; enabling EXA in xorg.conf makes the
server segfault; you have to specify a virtual desktop size in xorg.conf if you
want to use xrandr to get dual-head modes; compiz on a dual-head screen
1280x800+1280x1024 mode doesn't work well).</p>

<p><strong>Sound (Intel HDA):</strong> didn't work out of the box. I was unable
to build ALSA from CVS (some error with kernel headers). In the end I used
alsa-source from Ubuntu, with three extra patches.  Sound now works, but is
pretty quiet even at maximum volume, especially when watching movies.</p>

<p><strong>Wireless (Intel 3945ABG):</strong> worked out of the box, after I
realized I had to enable one cryptically named BIOS setting ("Internal Wireless
Radio Frequency").  NetworkManager doesn't work.  Sometimes the userspace
daemon (/sbin/ipw3945d-<em>kernelversion</em>) dies and I have to restart it
manually.  This, by the way, is the only non-free driver I have; I haven't
tried iwlwifi yet.</p>

<p><strong>Suspend to RAM:</strong> worked after I upgraded my kernel to
Gutsy's 2.6.22-9.26 (which is not released yet, I built a snapshot from git)
and added <tt>acpi_sleep=s3_bios</tt> to the kernel command line.  I've heard
that a newer version of the X 'intel' driver will make the acpi_sleep setting
unnecessary.</p>

<p><strong>Fingerprint reader:</strong> worked once I installed <a
    href="http://www.thinkwiki.org/wiki/How_to_enable_the_fingerprint_reader_with_ThinkFinger">thinkfinger</a>
from sources (it's not packaged for Ubuntu yet).  It works in GDM and in
terminals only; gksu breaks it (and then you have to open a terminal and
killall gksu, or you won't be able to use fingerprints any more in this
session), and gnome-screensaver doesn't even try to use it.</p>

<p><strong>Bluetooth:</strong> works, after I added <tt>thinkpad-acpi</tt> into
/etc/modules (it wasn't loaded by default).  The LED doesn't work well: it
stays off even if Bluetooth is enabled.  Strangely, if I reboot with Bluetooth
on, the LED shines until I log in, then turns off.  I haven't figured it out
yet.  By the way, install bluez-gnome if you want to be able to pair your
laptop to other Bluetooth devices.  I'm surprised that it isn't installed
by default.</p>

<p><strong>Screen brightness:</strong> the Fn-PgUp/Fn-PgDn keys don't work well
(they go into a weird feedback loop and ramp the brigtness all the way to the
maximum/minimum).  I can adjust the brightness manually with xbacklight.</p>

<p><strong>CD/DVD:</strong> works only if you go to the BIOS and set the
SATA setting to Compatibility instead of AHCI.  I haven't tried burning
any CDs/DVDs, but wodim -prcap says it could.</p>

<p><strong>4-in-1 card reader:</strong> doesn't work, apparently.</p>

<p><strong>USB:</strong> 10-15 minutes after a reboot the kernel gets an
unhandled interrupt 21 (or sometimes 23) and disables it.  Once that happens,
the two USB ports on the right partially stop functioning (you plug in devices
and nothing happens, but if you had a mouse plugged in before, it continues to
work).</p>

<p><strong>High-pitched noise when on battery power</strong> happens when the
CPU enters low-power states. <tt>echo 2 &gt;
    /sys/module/processor/parameters/max_cstate</tt> gets rid of the annoying
noise at the expense of battery life (which, incidentally, appears to be about
2.5-3 hours with the standard 6-cell 53 Wh battery).

<p><strong>The rest:</strong> wired Ethernet works (out of the box), keyboard
works (naturally), trackpoint works, touchpad works, ThinkLight works, CardBus
works.  I haven't tried the microphone, the modem, the ExpressCard slot, or
Firewire.</p>

<p><strong>Overall</strong> I'm pretty happy with my T61.  If you plan to buy
one, and don't want to spend a week patching kernels and compiling stuff from
source, I'd recommend waiting until October, when Ubuntu 7.10 will be released.
I expect all the bugs to get ironed out by then.  Most of the problems have
been reported in Launchpad and/or upstream repositories, but I ran out of steam
before I checked all of them.  The bugs I know about are listed on <a
    href="http://del.icio.us/mgedmin/bug+t61">this del.icio.us page</a>.</p>
]]></content:encoded><dc:date>2007-08-18T20:45:34Z</dc:date></item><item><title>Post-EuroPython 2007 sprint day 3</title><guid isPermaLink="false">europython-2007-sprints-3</guid><link>http://mg.pov.lt/blog/europython-2007-sprints-3</link><description>Previous entry . The numbers I posted earlier about zope.testing self-test coverage were incorrect. It turns out that when a ...</description><content:encoded><![CDATA[
<p><a href="http://mg.pov.lt/blog/europython-2007-sprints-2.html">Previous
    entry</a>.</p>

<p>The numbers I posted earlier about zope.testing self-test coverage were
incorrect.  It turns out that when a test runner tries to trace a test that
tests that a (different) test runner can use tracing to trace (different)
tests, they both compete over a single sys.settrace() hook and only one of them
wins.  Basically you get to choose between a failing test or incomplete test
coverage that ignores all subsequent tests.</p>

<p>If I skip the three tests that invoke sys.settrace() and run the rest with
--coverage, I get that the zope.testing test suite covers 73% of the code.
That's not bad, considering that some of the code is only invoked in a
subprocess (which we cannot trace), and some of the code is platform-specific
(if sys.platform == 'win32'), and some is Python-version-specific.</p>

<p>If I monkey-patch sys.settrace to set the hook only the first time it's called,
I get one failing test (as expected) and I see 77% test coverage.</p>

<p>Oh, I forgot: that's the coverage with my prototype colorizing code which
doesn't have unit tests yet.  On trunk the coverage reaches 81%.</p>

<p>By the way, yesterday was the first time I saw an <a
href="http://www.laptop.org/">OLPC laptop</a> in real life.  It's so small and
cute.</p>

<center><img src="http://mg.pov.lt/vika-and-olpc.jpg" border="0" width="500"
    height="375" alt="Vika and OLPC" /><br /><small>Vika holding the XO laptop.  What does XO mean, anyway?</small></center>

<p>Technorati tag: <a href="http://technorati.com/tag/europython2007" rel="tag"
class="techtag">europython2007</a></p>
]]></content:encoded><dc:date>2007-07-14T14:55:14Z</dc:date></item><item><title>Post-EuroPython 2007 sprint day 2</title><guid isPermaLink="false">europython-2007-sprints-2</guid><link>http://mg.pov.lt/blog/europython-2007-sprints-2</link><description>Previous entry . During the second day I refactored the Zope 3 test runner to make nearly all of its ...</description><content:encoded><![CDATA[
<p><a href="http://mg.pov.lt/blog/europython-2007-sprints-1.html">Previous
    entry</a>.</p>

<p>During the second day I refactored the Zope 3 test runner to make nearly all
of its output go through a single OutputFormatter class (in the <a
    href="http://svn.zope.org/zope.testing/branches/output-refactoring/">output-refactoring
    branch</a>), then created a subclass of it that uses ANSI color codes to
highlight error messages (in the <a
    href="http://svn.zope.org/zope.testing/branches/colorized-output/">colorized-output
    branch</a>).  I've had this luxury before, and I can attest that it does
increase productivity (being able to spot filenames and line numbers between
several-hundred-line diffs produced by testbrowser tests is invaluable).</p>

<p>
<a href="http://mg.pov.lt/colorized-test-white.png"><img border="0"
    src="http://mg.pov.lt/colorized-test-white-small.png" alt="Zope 3 test
    runner in a white terminal" /></a>
<a href="http://mg.pov.lt/colorized-test-black.png"><img border="0"
    src="http://mg.pov.lt/colorized-test-black-small.png" alt="Zope 3 test
    runner in a black terminal" /></a>
</p>

<p>I also had lots of fun trying to get the unit test coverage of the test
runner.  There's a bit of a chicken and egg problem here: to get accurate
coverage data you want the tracer to be enabled during import time, but you
cannot do that since the test runner doesn't exist yet.  Hacks with
<tt>reload()</tt> and <tt>del sys.modules['zope.testing.testrunner']</tt>
didn't work due to excessive monkey-patching in the test runner that caused
infinite recursion.  In the end I made a second copy of the module and used it to
run the test suite of the first copy.  (42% of the code is not covered by unit
tests, according to the coverage report.  I don't entirely trust that report,
though.)</p>

<p>On the last day I intend to clean up the code, add the unit tests for my
colorizer, and merge it to trunk.</p>

<p><a
    href="http://mg.pov.lt/blog/europython-2007-sprints-3.html">Continued...</a></p>

<p>Technorati tag: <a href="http://technorati.com/tag/europython2007" rel="tag"
class="techtag">europython2007</a></p>
]]></content:encoded><dc:date>2007-07-14T09:35:56Z</dc:date></item></channel></rss>