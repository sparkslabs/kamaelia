<html><head><meta name="qrichtext" content="1" /></head><body style="font-size:10pt;font-family:URW Gothic L">
<p><span style="font-size:24pt;font-weight:600">Cookbook Example</span></p>
<p align="right"><span style="font-size:18pt">How can I...?</span></p>
<p>Example 5: An introspecting version of Examples 2/3. This creates a simple streaming system, and looks inside to see what components are  running/active, and passes the resulting information over a network connection to an Axon Visualisation server. <span style="font-weight:600">Components used: </span><a href="/Components/pydoc/Kamaelia.Chassis.ConnectedServer.SimpleServer.html">SimpleServer</a>, <a href="/Components/pydoc/Kamaelia.Internet.TCPClient.TCPClient.html">TCPClient</a>, <a href="/Components/pydoc/Kamaelia.ReadFileAdaptor.ReadFileAdaptor.html">ReadFileAdaptor</a>, <a href="/Components/pydoc/Kamaelia.vorbisDecodeComponent.VorbisDecode.html">VorbisDecode</a>, <a href="/Components/pydoc/Kamaelia.vorbisDecodeComponent.AOAudioPlaybackAdaptor.html">AOAudioPlaybackAdaptor</a>, <a href="/Components/pydoc/Kamaelia.Util.Introspector.Introspector.html">Introspector</a></p>
<ul type="disc"><div dir="ltr">[[pre]<span style="font-style:italic">#!/usr/bin/python<br /><br /></span><span style="font-weight:600">from</span> Kamaelia.SimpleServerComponent <span style="font-weight:600">import</span> SimpleServer<br /><span style="font-weight:600">from</span> Kamaelia.Internet.TCPClient <span style="font-weight:600">import</span> TCPClient<br /><span style="font-weight:600">from</span> Kamaelia.vorbisDecodeComponent <span style="font-weight:600">import</span> VorbisDecode, AOAudioPlaybackAdaptor<br /><span style="font-weight:600">from</span> Kamaelia.Util.PipelineComponent <span style="font-weight:600">import</span> pipeline<br /><span style="font-weight:600">import</span> Kamaelia.ReadFileAdaptor<br /><span style="font-style:italic;font-weight:600"># This next line is new</span><br /><span style="font-weight:600">from</span> Kamaelia.Util.Introspector <span style="font-weight:600">import</span> Introspector<br /><br />file_to_stream = &quot;/usr/share/wesnoth/music/wesnoth-1.ogg&quot;<br />clientServerTestPort = 1501<br /><br /><span style="font-weight:600">def</span> AdHocFileProtocolHandler(filename):<br />    <span style="font-weight:600">class</span> klass(Kamaelia.ReadFileAdaptor.ReadFileAdaptor):<br />        <span style="font-weight:600">def</span> __init__(self,*argv,**argd):<br />            super(klass,self).__init__(filename, readmode=&quot;bitrate&quot;, bitrate=400000)<br />    <span style="font-weight:600">return</span> klass<br /><br /><span style="font-style:italic;font-weight:600"># Start the server</span><br />SimpleServer(protocol=AdHocFileProtocolHandler(file_to_stream),<br />             port=clientServerTestPort).activate()<br /><br /><span style="font-style:italic;font-weight:600"># Start the client</span><br />pipeline(<br />      TCPClient(&quot;127.0.0.1&quot;,clientServerTestPort),<br />      VorbisDecode(),<br />      AOAudioPlaybackAdaptor(),<br />).activate()<br /><br /><span style="font-style:italic;font-weight:600"># This next pipeline is new</span><br /><span style="font-style:italic;font-weight:600"># Start the introspector and connect to a local visualiser</span><br />pipeline(<br />    Introspector(),<br />    TCPClient(&quot;127.0.0.1&quot;, 1500),<br />).run()<br />]<br /><span style="font-weight:600">Source:</span> Examples/example5/IntrospectingSimpleStreamingSystem.py</div></ul>
<p></p>
</body></html>
