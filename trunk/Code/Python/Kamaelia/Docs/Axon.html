<html><head><meta name="qrichtext" content="1" /></head><body style="font-size:10pt;font-family:Sans Serif">
<p><a href="http://kamaelia.sourceforge.net/"><img align="right" src="cat.gif" alt="Kamaelia - BBC Open Source Network Platform"></a></p>
<p><span style="font-size:20pt">Kamaelia</span><span style="font-size:21pt"> </span><span style="font-size:19pt;font-weight:600">Axon</span></p>
<ul type="disc"><div><span style="font-style:italic">Axon is the core subsystem in Kamaelia</span></div></ul>
<p>Axon forms the core of Kamaelia. The following modules in Axon are listed in importance order, and are likely to be the ones you will be interested in. (Importance in terms of the viewpoint of a user of the system)</p>
<ul type="disc"><li><a href="Axon/__init__.py.html">__init__.py</a></li>
<li><a href="Axon/Component.py.html">Component.py</a></li>
<li><a href="Axon/Scheduler.py.html">Scheduler.py</a></li>
<li><a href="Axon/util.py.html">util.py</a></li>
<li><a href="Axon/Ipc.py.html">Ipc.py</a></li>
<li><a href="Axon/AxonExceptions.py.html">AxonExceptions.py</a></li>
<li><a href="Axon/AdaptiveCommsComponent.py.html">AdaptiveCommsComponent.py</a></li>
<li><a href="Axon/CoordinatingAssistantTracker.py.html">CoordinatingAssistantTracker.py</a></li></ul>
<p>The remaining modules in Axon are listed below in importance order, and you are unlikely to be the ones you will be interested in.</p>
<ul type="disc"><li><a href="Axon/debug.py.html">debug.py</a></li>
<li><a href="Axon/Linkage.py.html">Linkage.py</a></li>
<li><a href="Axon/Axon.py.html">Axon.py</a></li>
<li><a href="Axon/Microprocess.py.html">Microprocess.py</a></li>
<li><a href="Axon/Postman.py.html">Postman.py</a></li>
<li><a href="Axon/debugConfigFile.py.html">debugConfigFile.py</a></li>
<li><a href="Axon/idGen.py.html">idGen.py</a></li></ul>
<p>The following text is adapted from the README bundle that accompanies Axon's separate download...</p>
<p>Axon is the core of Kamaelia. The contents of this directory must be installed before the rest of Kamaelia can be used. It can also be used independently of Kamaelia.</p>
<p>The install procedure is python's usual dance:</p>
<ul type="disc"><li>python setup.py install</li></ul>
<p>Documentation is held in two places: (until this section is complete)</p>
<ul type="disc"><li>The usual 'pydoc name' - probably worth starting with:<br />pydoc Axon.Component</li>
<li>The test suite is designed to allow you to get low level API behaviour information - &quot;should X,Y, Z work? If so, what happens?&quot;. It's a partly retrofitted test suite, but some is TDD. (TDD took over late in the project) As a result, for example, passing a -v flag result in the docstring for each test to be dumped in a form that allows collation, and summarisation. (For an example of what we expect to automate from the test suite, see the end of this README file)</li></ul>
<p></p>
<p>Sample producer/consumber &amp; wrapper component system:</p>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">/-- testComponent -----------------------------------------------\<br />|                                                                |<br />|  +-- Producer ----+          +-- Consumer ----+                |<br />|  |            |result|---&gt;|source|         |result|---&gt;|_input||<br />|  +----------------+          +----------------+                |<br />|                                                                |<br />\----------------------------------------------------------------/</span></div></ul>
<p></p>
<p>The testComponent creates 2 subcomponents, creates the links in place, and takes the output from the consumer and links it to its own private/internal _input inbox. When it recieves a value from the consumer, it reports this fact and ceases operation.</p>
<ul type="disc"><li>Producer sends values to its result outbox</li>
<li>Consumer takes values from its source, does some work and sends results to its outbox</li></ul>
<p>(It's probably worth noting that an introspection system would be possible to write/nice to see that would be able to derive the above diagram from the running system)</p>
<p>Example code:</p>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch;font-weight:600">class</span><span style="font-family:Courier 10 Pitch"> Producer(component):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">Inboxes=[]<br />Outboxes=[&quot;result&quot;]<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> __init__(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">self.__super.__init__()</span></div></ul>
<div><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> main(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">i = 100<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">while</span><span style="font-family:Courier 10 Pitch">(i):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">i = i -1<br />self.send(&quot;hello&quot;, &quot;result&quot;)<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">yield</span><span style="font-family:Courier 10 Pitch"> 1</span></div></ul></ul></ul></ul>
<p></p>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch;font-weight:600">class</span><span style="font-family:Courier 10 Pitch"> Consumer(component):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">Inboxes=[&quot;source&quot;]<br />Outboxes=[&quot;result&quot;]<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> __init__(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">self.__super.__init__()<br />self.count = 0<br />self.i = 30</span></div></ul>
<div><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> doSomething(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch;font-weight:600">print</span><span style="font-family:Courier 10 Pitch"> self.name, &quot;Woo&quot;,self.i<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">if</span><span style="font-family:Courier 10 Pitch"> self.dataReady(&quot;source&quot;):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">self.recv(&quot;source&quot;)<br />self.count = self.count +1<br />self.send(self.count, &quot;result&quot;)</span></div></ul></ul>
<div><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> main(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch;font-weight:600">yield</span><span style="font-family:Courier 10 Pitch"> 1<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">while</span><span style="font-family:Courier 10 Pitch">(self.i):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">self.i = self.i -1<br />self.doSomething()<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">yield</span><span style="font-family:Courier 10 Pitch"> 1</span></div></ul></ul></ul></ul>
<p></p>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch;font-weight:600">class</span><span style="font-family:Courier 10 Pitch"> testComponent(component):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">Inboxes=[&quot;_input&quot;]<br />Outboxes=[]<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> __init__(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">self.__super.__init__()<br />self.producer = Producer()<br />self.consumer = Consumer()<br />self.addChildren(self.producer, self.consumer)<br />self.link((self.producer, &quot;result&quot;), (self.consumer, &quot;source&quot;))<br />linkage(self.consumer,self,&quot;result&quot;,&quot;_input&quot;, self.postoffice)</span></div></ul>
<div><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> childComponents(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">return [self.producer, self.consumer]</span></div></ul>
<div><span style="font-family:Courier 10 Pitch;font-weight:600">def</span><span style="font-family:Courier 10 Pitch"> mainBody(self):</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch;font-weight:600">while</span><span style="font-family:Courier 10 Pitch"> len(self.inboxes[&quot;_input&quot;]) &lt; 1:</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch;font-weight:600">yield</span><span style="font-family:Courier 10 Pitch"> 1</span></div></ul>
<div><span style="font-family:Courier 10 Pitch">result = self.recv(&quot;_input&quot;)<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">print</span><span style="font-family:Courier 10 Pitch"> &quot;Consumer finished with result:&quot;, result, &quot;!&quot;</span></div></ul></ul></ul>
<p></p>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">r = scheduler()<br />p = testComponent()<br />children = p.childComponents()<br />p.activate()<br /></span><span style="font-family:Courier 10 Pitch;font-weight:600">for</span><span style="font-family:Courier 10 Pitch"> p </span><span style="font-family:Courier 10 Pitch;font-weight:600">in</span><span style="font-family:Courier 10 Pitch"> children:</span></div>
<ul type="disc"><div><span style="font-family:Courier 10 Pitch">p.activate()</span></div></ul>
<div><span style="font-family:Courier 10 Pitch">scheduler.run.runThreads(slowmo=0)</span></div></ul>
<p>(It would probably be nice to have better syntactic sugar here by using dictionaries, operators (eg '|' ) and decorators. The presentation on the website on Kamaelia shows a partial semi-reimplementation of ideas using decorators to eliminate the classes above)</p>
<p>For various reasons it makes sense to run all Axon code using the -OO flags - this is due to the currently highly inefficient debug framework. One downside of async systems is that debuggers tend to have a hard time - but this has been thought of upfront :), the downside is that if you run with debugging enabled/possible, then the system runs like a pig. (Due to some rather heavy duty fumbling around in the garbage collector)</p>
<p></p>
<p></p>
<p></p>
<p>Michael, December 2004</p>
<p></p>
<p><hr></p>
<p> <a href="http://www.opensource.org/docs/definition.php"> <img align=right border=0 height=31 src=http://opensource.org/trademarks/open_source_button.png width=88 ></a> <a href="http://sourceforge.net"> <img align=right alt="SourceForge.net Logo" border=0 height=31 src=http://sourceforge.net/sflogo.php?group_id ></a></p>
<li type="disc"></li>
</body></html>
